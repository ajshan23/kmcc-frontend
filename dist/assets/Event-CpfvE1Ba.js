import{r as a,j as e,i as A,T as c,L as E}from"./index-DPuNUjLg.js";import{P as N}from"./PageTitle-CqWn3q0T.js";import{a as u}from"./api-alN533tX.js";import{M as C,a as S,b as M,c as T,d as k}from"./Modal-Bm2W9xQ1.js";import{B as l}from"./Button-BnjsKorX.js";import{R as j,C as h}from"./Row-CcHO1i0D.js";import"./AbstractModalHeader-C5mIjlxV.js";import"./useWindow-BTZREjyk.js";import"./usePrevious-CEtGd44F.js";import"./useEventCallback-B4w45794.js";import"./hasClass-CdxUpXmx.js";import"./useMergedRefs-DcLTWITF.js";import"./NoopTransition-Cpqj05AY.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-CR8nEuA8.js";import"./Button-CXwj5S0n.js";const Q=()=>{const[g,x]=a.useState([]),[y,n]=a.useState(!1),[i,r]=a.useState(null),[v,d]=a.useState(!1),[f,p]=a.useState("");a.useEffect(()=>{(async()=>{try{const s=await u.get("/admin/get-events");s.status===200&&(x(s.data.data),console.log(s.data.data))}catch(s){console.error(s)}})()},[]);const b=t=>{r(t),n(!0)},m=()=>{n(!1),r(null)},w=async()=>{if(i)try{(await u.patch(`/admin/status/event/${i.id}`)).status===200&&(x(s=>s.map(o=>o.id===i.id?{...o,isFinished:!0}:o)),p("Event status updated successfully!"),d(!0))}catch(t){console.error("Error updating event status:",t),p("Failed to update event status."),d(!0)}finally{n(!1),r(null)}};return e.jsxs("div",{className:"d-flex p-4",children:[e.jsx(N,{title:"Event"}),e.jsx(A,{position:"top-end",className:"p-3",children:e.jsxs(c,{onClose:()=>d(!1),show:v,delay:3e3,autohide:!0,children:[e.jsx(c.Header,{children:e.jsx("strong",{className:"me-auto",children:"Notification"})}),e.jsx(c.Body,{children:f})]})}),e.jsxs(C,{show:y,onHide:m,dialogClassName:"modal-top",children:[e.jsx(S,{closeButton:!0,children:e.jsx(M,{as:"h4",children:"Update Event"})}),e.jsx(T,{children:i&&e.jsx("div",{children:e.jsx("p",{children:"The event is already finished?"})})}),e.jsxs(k,{children:[e.jsx(l,{variant:"light",onClick:m,children:"Close"}),e.jsx(l,{variant:"primary",onClick:w,disabled:i==null?void 0:i.isFinished,children:"Save Changes"})]})]}),e.jsx(j,{children:e.jsx(h,{xs:12,children:e.jsxs("div",{style:{width:"70vw",background:"white",border:"1px solid gray",padding:10,borderRadius:10},children:[e.jsxs(j,{className:"d-flex justify-content-between align-items-center p-2",children:[e.jsx(h,{xs:"auto",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",style:{width:"250px",borderRadius:10}})}),e.jsx(h,{xs:"auto",children:e.jsx(l,{type:"button",variant:"dark",style:{padding:"10px 20px",borderRadius:10},as:E,to:"/event/new",children:"New Event"})})]}),e.jsx("div",{children:e.jsx("div",{className:"responsive-table-plugin",children:e.jsx("div",{className:"table-rep-plugin",children:e.jsx("div",{className:"table-responsive","data-pattern":"priority-columns",children:e.jsxs("table",{id:"tech-companies-1",className:"table table-striped",style:{width:"100%",textAlign:"center"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"center"},children:"Title"}),e.jsx("th",{style:{textAlign:"center"},children:"Event Date"}),e.jsx("th",{style:{textAlign:"center"},children:"Place"}),e.jsx("th",{style:{textAlign:"center"},children:"Timing"}),e.jsx("th",{style:{textAlign:"center"},children:"Image"}),e.jsx("th",{style:{textAlign:"center"},children:"Status"}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:g.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"middle"},children:t.title}),e.jsx("td",{style:{verticalAlign:"middle"},children:new Date(t.eventDate).toLocaleDateString()}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.place}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.timing}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.image?e.jsx("img",{src:t.image,alt:"Event Banner",style:{width:"50px",height:"auto",display:"block",margin:"0 auto",borderRadius:2}}):"N/A"}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.isFinished?"Finished":"Ongoing"}),e.jsx("td",{style:{verticalAlign:"middle"},children:e.jsx(l,{type:"button",variant:"outline-dark",className:"me-2",style:{borderRadius:5,padding:"5px 10px"},onClick:()=>b(t),disabled:t.isFinished,children:"Update"})})]},s))})]})})})})})]})})})]})};export{Q as default};
