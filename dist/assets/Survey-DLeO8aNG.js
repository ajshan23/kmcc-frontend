import{r,j as e,T as N,h as A,i as k,L as o}from"./index-DvBs_XxN.js";import{P as D}from"./PageTitle-JyfAtr6J.js";import{a as p}from"./api-CQpZrRPq.js";import{I as j}from"./IconifyIcon-B1qkdp1h.js";import{l as I}from"./logo-sm-Bq_R7RX3.js";import{C as M}from"./Container-BRwIfoEE.js";import{R as y}from"./Row-4F2rpKTs.js";import{C as c}from"./Col-X6kS0LVx.js";import{B as s}from"./Button-C42B3a1V.js";import{T as R}from"./Table-Dkw2e96E.js";import{M as i}from"./Modal-CisFgvMH.js";import"./iconify-BL8OsjYR.js";import"./Button-DgXctBpM.js";import"./AbstractModalHeader-Bv6kTXjx.js";import"./useWindow-BTd5z_xy.js";import"./usePrevious-BDineeon.js";import"./useEventCallback-Dq8VwJIV.js";import"./hasClass-BEnhx4ws.js";import"./useMergedRefs-zTyG0_SU.js";import"./NoopTransition-B0RGQHIG.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-BHTNlR0-.js";const te=()=>{const[f,h]=r.useState([]),[v,u]=r.useState(!1),[l,x]=r.useState(null),[g,m]=r.useState(""),[w,n]=r.useState(!1);r.useEffect(()=>{S()},[]);const S=async()=>{try{const t=await p.get("/survey");t.status===200&&h(t.data.data.surveys)}catch(t){console.error("Error fetching surveys:",t)}},b=t=>{x(t),u(!0)},a=()=>{u(!1),x(null)},C=async()=>{if(l)try{(await p.delete(`/survey/${l}`)).status===200&&(h(d=>d.filter(T=>T.id!==l)),m("Survey deleted successfully!"),n(!0))}catch(t){console.error("Error deleting survey:",t),m("Failed to delete survey."),n(!0)}finally{a()}};return e.jsxs(M,{className:"p-4",children:[e.jsx(D,{title:"Survey"}),e.jsxs(N,{onClose:()=>n(!1),show:w,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(A,{children:[e.jsx("img",{src:I,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(k,{children:g})]}),e.jsx(y,{children:e.jsx(c,{xs:12,children:e.jsxs("div",{className:"p-3 bg-white border rounded",style:{width:"70vw"},children:[e.jsxs(y,{className:"d-flex justify-content-between align-items-center p-2",children:[e.jsx(c,{xs:"auto",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",style:{width:"250px",borderRadius:10}})}),e.jsx(c,{xs:"auto",children:e.jsx(s,{variant:"dark",as:o,to:"/survey/new",style:{padding:"10px 20px",borderRadius:10},children:"New Survey"})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs(R,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mt-3 text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"center"},children:"Title"}),e.jsx("th",{style:{textAlign:"center"},children:"Description"}),e.jsx("th",{style:{textAlign:"center"},children:"Questions"}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:f.map((t,d)=>e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"middle"},children:t.title}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.description||"N/A"}),e.jsxs("td",{children:[e.jsx(s,{className:"m-2",variant:"light",style:{backgroundColor:"white",padding:"5px 20px",borderRadius:10},as:o,to:`/questions/${t.id}`,children:"View"}),e.jsx(s,{variant:"light",style:{backgroundColor:"white",padding:"5px 20px",borderRadius:10},as:o,to:`/add/questions/${t.id}`,children:"Add"})]}),e.jsxs("td",{style:{verticalAlign:"middle"},children:[e.jsx(s,{variant:"info",className:"me-2",as:o,to:`/survey/answers/${t.id}`,children:e.jsx(j,{color:"white",icon:"mdi:eye-outline"})}),e.jsx(s,{variant:"danger",onClick:()=>b(t.id),children:e.jsx(j,{color:"white",icon:"ri:delete-bin-4-fill"})})]})]},d))})]})})]})})}),e.jsxs(i,{show:v,onHide:a,centered:!0,children:[e.jsx(i.Header,{closeButton:!0,children:e.jsx(i.Title,{children:"Delete Survey"})}),e.jsx(i.Body,{children:"Are you sure you want to delete this survey? This action cannot be undone."}),e.jsxs(i.Footer,{children:[e.jsx(s,{variant:"secondary",onClick:a,children:"Cancel"}),e.jsx(s,{variant:"danger",onClick:C,children:"Delete"})]})]})]})};export{te as default};
