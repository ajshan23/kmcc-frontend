import{r as i,j as e,T as w,g as A,h as T,L as N}from"./index-DTNBVJXJ.js";import{P as C}from"./PageTitle-BSd58_4C.js";import{a as j}from"./api-alN533tX.js";import{I}from"./IconifyIcon-C822AO2m.js";import{l as k}from"./logo-sm-DeRMNujR.js";import{R as u,C as c}from"./Row-BAydH47-.js";import{B as l}from"./Button-D3ui8Ipe.js";import{M as r}from"./Modal-DKRSr83T.js";import"./iconify-DGrS6a3F.js";import"./Button-LfktIHOk.js";import"./AbstractModalHeader-D6I5S5PL.js";import"./useWindow-xTJRIZxH.js";import"./usePrevious-Dd_7dJOG.js";import"./useEventCallback-Kge2rWHC.js";import"./hasClass-DSnRUSEg.js";import"./useMergedRefs-BnvYSThD.js";import"./NoopTransition-BwsqUNgw.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-Bqr9clmc.js";const W=()=>{const[d,h]=i.useState([]),[g,x]=i.useState(!1),[n,m]=i.useState(null),[y,p]=i.useState(""),[v,o]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const s=await j.get("/services");s.status===200&&(h(s.data.data.services),console.log(d))}catch(s){console.error("Error fetching services:",s)}})()},[]);const f=t=>{m(t),x(!0)},a=()=>{x(!1),m(null)},b=async()=>{if(n)try{(await j.delete(`/services/${n}`)).status===200&&(h(s=>s.filter(S=>S.id!==n)),p("Service deleted successfully!"),o(!0))}catch(t){console.error("Error deleting service:",t),p("Failed to delete service."),o(!0)}finally{a()}};return e.jsxs("div",{className:"d-flex p-4",children:[e.jsx(C,{title:"Service"}),e.jsxs(w,{onClose:()=>o(!1),show:v,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(A,{children:[e.jsx("img",{src:k,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(T,{children:y})]}),e.jsx(u,{children:e.jsx(c,{xs:12,children:e.jsxs("div",{style:{width:"70vw",background:"white",border:"1px solid gray",padding:10,borderRadius:10},children:[e.jsxs(u,{className:"d-flex justify-content-between align-items-center p-2",children:[e.jsx(c,{xs:"auto",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",style:{width:"250px",borderRadius:10}})}),e.jsx(c,{xs:"auto",children:e.jsx(l,{type:"button",variant:"dark",style:{padding:"10px 20px",borderRadius:10},as:N,to:"/service/new",children:"New Service"})})]}),e.jsx("div",{children:e.jsx("div",{className:"responsive-table-plugin",children:e.jsx("div",{className:"table-rep-plugin",children:e.jsx("div",{className:"table-responsive","data-pattern":"priority-columns",children:e.jsxs("table",{id:"tech-companies-1",className:"table table-striped",style:{width:"100%",textAlign:"center"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"center"},children:"Title"}),e.jsx("th",{style:{textAlign:"center"},children:"Location"}),e.jsx("th",{style:{textAlign:"center"},children:"Time"}),e.jsx("th",{style:{textAlign:"center"},children:"Phone Number"}),e.jsx("th",{style:{textAlign:"center"},children:"Image"}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:d.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"middle"},children:t.title}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.location}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.startingTime+"-"+t.stoppingTime}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.phoneNumber}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.image?e.jsx("img",{src:t.image,alt:"Service Banner",style:{width:"50px",height:"auto",display:"block",margin:"0 auto",borderRadius:2}}):"N/A"}),e.jsx("td",{style:{verticalAlign:"middle"},children:e.jsx(l,{type:"button",variant:"danger",onClick:()=>f(t.id),children:e.jsx(I,{color:"white",icon:"ri:delete-bin-4-fill"})})})]},s))})]})})})})})]})})}),e.jsxs(r,{show:g,onHide:a,centered:!0,children:[e.jsx(r.Header,{closeButton:!0,children:e.jsx(r.Title,{children:"Delete Service"})}),e.jsx(r.Body,{children:"Are you sure you want to delete this service? This action cannot be undone."}),e.jsxs(r.Footer,{children:[e.jsx(l,{variant:"secondary",onClick:a,children:"Cancel"}),e.jsx(l,{variant:"danger",onClick:b,children:"Delete"})]})]})]})};export{W as default};
