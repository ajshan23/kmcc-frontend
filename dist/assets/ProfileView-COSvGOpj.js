import{d as M,u as G,r,j as e,T as w}from"./index-tbORj_h7.js";import{a as O}from"./api-BWS4aRsM.js";import{P as q}from"./PageTitle-B5UZOk6x.js";import{I as A}from"./IconifyIcon-DNveIdU0.js";import{S as F}from"./Spinner-i65u_QRX.js";import{R as n,C as t}from"./Row-BAKXF0E5.js";import{C as h}from"./Card-CS7mEMRp.js";import{B}from"./Badge-BRCL_N-i.js";import{B as d}from"./ListGroup-DElDL5SU.js";import{B as U}from"./Button-Bd2MDoO7.js";import{N as c}from"./TabPane-DNYPvmFI.js";import{T as x}from"./Tab-Dh_-3mRY.js";import"./iconify-C4gxA2ZK.js";import"./CardBody-DNeWABbn.js";import"./CardHeaderContext-DmhcPj-M.js";import"./divWithClassName-B7qpIybN.js";import"./hook-cxsMDVT0.js";import"./extends-CF3RwP-h.js";import"./Nav-CxiU5vm2.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-EBFiEqIc.js";import"./useMergedRefs-ChrblFYH.js";import"./NavItem-BOpAY93N.js";import"./useEventCallback-BPutPn65.js";import"./Button-DIcN3Qge.js";import"./NavbarContext-BxXvb4Hd.js";import"./NavLink-DYNsEqNr.js";import"./Anchor-9aGJu9H_.js";import"./NoopTransition-CMRoOKHe.js";const Ne=()=>{const{id:o}=M(),p=G(),[D,j]=r.useState(!0),[i,C]=r.useState(null),[a,T]=r.useState(null),[E,f]=r.useState(!1),[k,K]=r.useState(""),[m,L]=r.useState("basic");return r.useEffect(()=>{(async()=>{var u,N,b,g,v,y,I,P,S;try{j(!0);const l=await O.get(`/admin/users/${o}`),s=l.data.data||l.data;if(!s)throw new Error("Profile data not found");C({id:s.id,name:s.name,email:s.email,phoneNumber:s.phoneNumber,memberId:s.memberId,iqamaNumber:s.iqamaNumber,isAdmin:s.isAdmin,isSuperAdmin:s.isSuperAdmin,profileImage:s.profileImage?`data:image/png;base64,${s.profileImage}`:null,createdAt:new Date(s.createdAt).toLocaleDateString()}),T({occupation:((u=s.profile)==null?void 0:u.occupation)||"Not specified",employer:((N=s.profile)==null?void 0:N.employer)||"Not specified",place:((b=s.profile)==null?void 0:b.place)||"Not specified",dateOfBirth:(g=s.profile)!=null&&g.dateOfBirth?new Date(s.profile.dateOfBirth).toLocaleDateString():"Not specified",bloodGroup:((v=s.profile)==null?void 0:v.bloodGroup)||"Not specified",kmccPosition:((y=s.profile)==null?void 0:y.kmccPosition)||"Not specified",address:((I=s.profile)==null?void 0:I.address)||"Not specified"})}catch(l){console.error("Error fetching profile data:",l),K(((S=(P=l.response)==null?void 0:P.data)==null?void 0:S.message)||"Failed to load profile"),f(!0),p("/users")}finally{j(!1)}})()},[o,p]),D?e.jsx("div",{className:"d-flex justify-content-center p-5",children:e.jsx(F,{animation:"border"})}):!i||!a?e.jsx("div",{className:"d-flex justify-content-center p-5",children:e.jsx("h4",{children:"Profile not found"})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"User Profile",breadcrumbItems:[{label:"Users",path:"/users"},{label:`User #${o}`,active:!0}]}),e.jsx(w,{onClose:()=>f(!1),show:E,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:e.jsx(w.Body,{children:k})}),e.jsxs(n,{children:[e.jsx(t,{lg:4,children:e.jsx(h,{children:e.jsxs(h.Body,{className:"text-center",children:[i.profileImage?e.jsx("img",{src:i.profileImage,alt:"Profile",className:"rounded-circle mb-3",width:"150",height:"150"}):e.jsx("div",{className:"bg-light rounded-circle d-flex align-items-center justify-content-center mb-3",style:{width:150,height:150},children:e.jsx(A,{icon:"mdi:account",className:"text-muted",width:60})}),e.jsx("h4",{children:i.name}),e.jsx("p",{className:"text-muted mb-1",children:a.kmccPosition}),e.jsxs("div",{className:"d-flex justify-content-center gap-2 mt-3",children:[e.jsx(B,{bg:i.isSuperAdmin?"danger":i.isAdmin?"primary":"secondary",children:i.isSuperAdmin?"Super Admin":i.isAdmin?"Admin":"Member"}),e.jsxs(B,{bg:"info",children:["Member since: ",i.createdAt]})]}),e.jsx("hr",{className:"my-4"}),e.jsxs(d,{variant:"flush",children:[e.jsx(d.Item,{children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"Member ID:"}),e.jsx("strong",{children:i.memberId})]})}),e.jsx(d.Item,{children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"Iqama Number:"}),e.jsx("strong",{children:i.iqamaNumber})]})}),e.jsx(d.Item,{children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"Phone:"}),e.jsx("strong",{children:i.phoneNumber})]})}),e.jsx(d.Item,{children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"Email:"}),e.jsx("strong",{children:i.email||"Not specified"})]})})]}),e.jsxs(U,{variant:"primary",className:"mt-3",onClick:()=>p(`/users/${o}/edit`),children:[e.jsx(A,{icon:"mdi:pencil",className:"me-1"}),"Edit Profile"]})]})})}),e.jsx(t,{lg:8,children:e.jsx(h,{children:e.jsxs(h.Body,{children:[e.jsxs(c,{variant:"tabs",activeKey:m,onSelect:L,children:[e.jsx(c.Item,{children:e.jsx(c.Link,{eventKey:"basic",children:"Basic Information"})}),e.jsx(c.Item,{children:e.jsx(c.Link,{eventKey:"professional",children:"Professional Details"})}),e.jsx(c.Item,{children:e.jsx(c.Link,{eventKey:"contact",children:"Contact Information"})})]}),e.jsxs(x.Content,{className:"p-3",children:[e.jsxs(x.Pane,{eventKey:"basic",active:m==="basic",children:[e.jsxs(n,{children:[e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Full Name"}),e.jsx("p",{className:"fs-5",children:i.name})]})}),e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Date of Birth"}),e.jsx("p",{className:"fs-5",children:a.dateOfBirth})]})})]}),e.jsxs(n,{children:[e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Blood Group"}),e.jsx("p",{className:"fs-5",children:a.bloodGroup})]})}),e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Member Since"}),e.jsx("p",{className:"fs-5",children:i.createdAt})]})})]})]}),e.jsxs(x.Pane,{eventKey:"professional",active:m==="professional",children:[e.jsxs(n,{children:[e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Occupation"}),e.jsx("p",{className:"fs-5",children:a.occupation})]})}),e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Employer"}),e.jsx("p",{className:"fs-5",children:a.employer})]})})]}),e.jsxs(n,{children:[e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"KMCC Position"}),e.jsx("p",{className:"fs-5",children:a.kmccPosition})]})}),e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Place"}),e.jsx("p",{className:"fs-5",children:a.place})]})})]})]}),e.jsxs(x.Pane,{eventKey:"contact",active:m==="contact",children:[e.jsxs(n,{children:[e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Phone Number"}),e.jsx("p",{className:"fs-5",children:i.phoneNumber})]})}),e.jsx(t,{md:6,children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Email Address"}),e.jsx("p",{className:"fs-5",children:i.email||"Not specified"})]})})]}),e.jsx(n,{children:e.jsx(t,{children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-muted",children:"Full Address"}),e.jsx("p",{className:"fs-5",children:a.address})]})})})]})]})]})})})]})]})};export{Ne as default};
