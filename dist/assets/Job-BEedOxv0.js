import{r as l,j as e,T as v,h as N,i as J,L as d}from"./index-D9C8xGDJ.js";import{P as C}from"./PageTitle-CTV_nOCB.js";import{a as p}from"./api-CQpZrRPq.js";import{I as c}from"./IconifyIcon-B_FaLXx1.js";import{l as S}from"./logo-sm-Bq_R7RX3.js";import{R as y,C as h}from"./Row-DNXGtDaS.js";import{B as i}from"./Button-jzwfO54I.js";import{M as r}from"./Modal-CL_CNIw1.js";import"./iconify-D7I9lgUj.js";import"./Button-_Yz-NvGp.js";import"./AbstractModalHeader-B0m5d8Cx.js";import"./useWindow-B79ER2bB.js";import"./usePrevious-DlNrynkd.js";import"./useEventCallback-CSjVCyuo.js";import"./hasClass-DiruUP4K.js";import"./useMergedRefs-ChISKg02.js";import"./NoopTransition-CoSkVbwQ.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-2VyLv_7K.js";const U=()=>{const[g,x]=l.useState([]),[u,o]=l.useState(!1),[a,m]=l.useState(null),[b,n]=l.useState(!1),[f,j]=l.useState("");l.useEffect(()=>{(async()=>{try{const s=await p.get("/jobs/admin/all");s.status===200&&x(s.data.data)}catch(s){console.error("Error fetching jobs:",s)}})()},[]);const w=t=>{m(t),o(!0)},A=async()=>{if(a)try{await p.delete(`/jobs/admin/${a.id}`),x(t=>t.filter(s=>s.id!==a.id)),j("Job deleted successfully!"),n(!0)}catch(t){console.error("Error deleting job:",t),j("Failed to delete job."),n(!0)}finally{o(!1),m(null)}};return e.jsxs("div",{className:"d-flex p-4",children:[e.jsx(C,{title:"Job"}),e.jsxs(v,{onClose:()=>n(!1),show:b,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(N,{children:[e.jsx("img",{src:S,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(J,{children:f})]}),e.jsx(y,{children:e.jsx(h,{xs:12,children:e.jsxs("div",{style:{width:"70vw",background:"white",border:"1px solid gray",padding:10,borderRadius:10},children:[e.jsxs(y,{className:"d-flex justify-content-between align-items-center p-2",children:[e.jsx(h,{xs:"auto",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",style:{width:"250px",borderRadius:10}})}),e.jsx(h,{xs:"auto",children:e.jsx(i,{type:"button",variant:"dark",style:{padding:"10px 20px",borderRadius:10},as:d,to:"/job/new",children:"New Job"})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",style:{width:"100%",textAlign:"center"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"center"},children:"Company Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Position"}),e.jsx("th",{style:{textAlign:"center"},children:"Job Mode"}),e.jsx("th",{style:{textAlign:"center"},children:"Salary"}),e.jsx("th",{style:{textAlign:"center"},children:"Place"}),e.jsx("th",{style:{textAlign:"center"},children:"Image"}),e.jsx("th",{style:{textAlign:"center"},children:"Status"}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:g.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"middle"},children:t.companyName}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.position}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.jobMode}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.salary}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.place}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.logo?e.jsx("img",{src:t.logo,alt:"Job Logo",style:{width:"50px",height:"auto",borderRadius:10}}):"N/A"}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.isClosed?e.jsx("span",{className:"badge bg-danger",children:"Closed"}):e.jsx("span",{className:"badge bg-success",children:"Active"})}),e.jsxs("td",{style:{verticalAlign:"middle"},children:[e.jsx(i,{type:"button",variant:"info",className:"me-2",as:d,to:`/job/applications/${t.id}`,children:e.jsx(c,{icon:"mdi:eye",color:"white"})}),e.jsx(i,{type:"button",variant:"primary",className:"me-2",as:d,to:`/job/edit/${t.id}`,children:e.jsx(c,{icon:"mdi:pencil",color:"white"})}),e.jsx(i,{type:"button",variant:"danger",onClick:()=>w(t),children:e.jsx(c,{icon:"ri:delete-bin-4-fill",color:"white"})})]})]},s))})]})})]})})}),e.jsxs(r,{show:u,onHide:()=>o(!1),centered:!0,children:[e.jsx(r.Header,{closeButton:!0,children:e.jsx(r.Title,{children:"Delete Job"})}),e.jsx(r.Body,{children:"Are you sure you want to delete this job? This action cannot be undone."}),e.jsxs(r.Footer,{children:[e.jsx(i,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),e.jsx(i,{variant:"danger",onClick:A,children:"Delete"})]})]})]})};export{U as default};
