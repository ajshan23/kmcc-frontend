import{r as s,j as e,T,g as N,h as A,L as d}from"./index-DPuNUjLg.js";import{P as k}from"./PageTitle-CqWn3q0T.js";import{a as p}from"./api-alN533tX.js";import{I as D}from"./IconifyIcon-CRmgpD-A.js";import{l as I}from"./logo-sm-DeRMNujR.js";import{C as M}from"./Container-CGStooxB.js";import{R as y,C as c}from"./Row-CcHO1i0D.js";import{B as r}from"./Button-BnjsKorX.js";import{T as R}from"./Table-Dg6KVoj7.js";import{M as i}from"./Modal-Bm2W9xQ1.js";import"./iconify-CwHMartp.js";import"./Button-CXwj5S0n.js";import"./AbstractModalHeader-C5mIjlxV.js";import"./useWindow-BTZREjyk.js";import"./usePrevious-CEtGd44F.js";import"./useEventCallback-B4w45794.js";import"./hasClass-CdxUpXmx.js";import"./useMergedRefs-DcLTWITF.js";import"./NoopTransition-Cpqj05AY.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-CR8nEuA8.js";const ee=()=>{const[j,h]=s.useState([]),[f,u]=s.useState(!1),[o,x]=s.useState(null),[g,m]=s.useState(""),[v,l]=s.useState(!1);s.useEffect(()=>{w()},[]);const w=async()=>{try{const t=await p.get("/survey");t.status===200&&h(t.data.data.surveys)}catch(t){console.error("Error fetching surveys:",t)}},S=t=>{x(t),u(!0)},n=()=>{u(!1),x(null)},b=async()=>{if(o)try{(await p.delete(`/survey/${o}`)).status===200&&(h(a=>a.filter(C=>C.id!==o)),m("Survey deleted successfully!"),l(!0))}catch(t){console.error("Error deleting survey:",t),m("Failed to delete survey."),l(!0)}finally{n()}};return e.jsxs(M,{className:"p-4",children:[e.jsx(k,{title:"Survey"}),e.jsxs(T,{onClose:()=>l(!1),show:v,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(N,{children:[e.jsx("img",{src:I,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(A,{children:g})]}),e.jsx(y,{children:e.jsx(c,{xs:12,children:e.jsxs("div",{className:"p-3 bg-white border rounded",style:{width:"70vw"},children:[e.jsxs(y,{className:"d-flex justify-content-between align-items-center p-2",children:[e.jsx(c,{xs:"auto",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",style:{width:"250px",borderRadius:10}})}),e.jsx(c,{xs:"auto",children:e.jsx(r,{variant:"dark",as:d,to:"/survey/new",style:{padding:"10px 20px",borderRadius:10},children:"New Survey"})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs(R,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mt-3 text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"center"},children:"Title"}),e.jsx("th",{style:{textAlign:"center"},children:"Description"}),e.jsx("th",{style:{textAlign:"center"},children:"Questions"}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:j.map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"middle"},children:t.title}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.description||"N/A"}),e.jsxs("td",{children:[e.jsx(r,{className:"m-2",variant:"light",style:{backgroundColor:"white",padding:"5px 20px",borderRadius:10},as:d,to:`/questions/${t.id}`,children:"View"}),e.jsx(r,{variant:"light",style:{backgroundColor:"white",padding:"5px 20px",borderRadius:10},as:d,to:`/add/questions/${t.id}`,children:"Add"})]}),e.jsx("td",{style:{verticalAlign:"middle"},children:e.jsx(r,{variant:"danger",onClick:()=>S(t.id),children:e.jsx(D,{color:"white",icon:"ri:delete-bin-4-fill"})})})]},a))})]})})]})})}),e.jsxs(i,{show:f,onHide:n,centered:!0,children:[e.jsx(i.Header,{closeButton:!0,children:e.jsx(i.Title,{children:"Delete Survey"})}),e.jsx(i.Body,{children:"Are you sure you want to delete this survey? This action cannot be undone."}),e.jsxs(i.Footer,{children:[e.jsx(r,{variant:"secondary",onClick:n,children:"Cancel"}),e.jsx(r,{variant:"danger",onClick:b,children:"Delete"})]})]})]})};export{ee as default};
