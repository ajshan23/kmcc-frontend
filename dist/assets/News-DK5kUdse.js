import{r,j as e,T as I,h as T,i as C,L as u}from"./index-tbORj_h7.js";import{P as S}from"./PageTitle-B5UZOk6x.js";import{a as p}from"./api-BWS4aRsM.js";import{I as j}from"./IconifyIcon-DNveIdU0.js";import{l as M}from"./logo-sm-DeRMNujR.js";import{R as g,C as d}from"./Row-BAKXF0E5.js";import{B as i}from"./Button-Bd2MDoO7.js";import{M as l}from"./Modal-CvkZUMz4.js";import"./iconify-C4gxA2ZK.js";import"./Button-DIcN3Qge.js";import"./AbstractModalHeader-CyNFVtV3.js";import"./useWindow-qyDVknU7.js";import"./usePrevious-Bxq2cH5n.js";import"./useEventCallback-BPutPn65.js";import"./hasClass-BSEzL-da.js";import"./useMergedRefs-ChrblFYH.js";import"./NoopTransition-CMRoOKHe.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-B7qpIybN.js";const W=()=>{const[y,c]=r.useState([]),[w,h]=r.useState(!1),[a,x]=r.useState(null),[f,m]=r.useState(""),[N,n]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const s=await p.get("/news");s.status===200&&c(s.data.data.news)}catch(s){console.error("Error fetching news:",s)}})()},[]);const b=t=>{x(t),h(!0)},o=()=>{h(!1),x(null)},A=async()=>{if(a)try{(await p.delete(`/news/${a}`)).status===200&&(c(s=>s.filter(v=>v.id!==a)),m("News deleted successfully!"),n(!0))}catch(t){console.error("Error deleting news:",t),m("Failed to delete news."),n(!0)}finally{o()}};return e.jsxs("div",{className:"d-flex p-4",children:[e.jsx(S,{title:"News"}),e.jsxs(I,{onClose:()=>n(!1),show:N,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(T,{children:[e.jsx("img",{src:M,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(C,{children:f})]}),e.jsx(g,{children:e.jsx(d,{xs:12,children:e.jsxs("div",{style:{width:"70vw",background:"white",border:"1px solid gray",padding:10,borderRadius:10},children:[e.jsxs(g,{className:"d-flex justify-content-between align-items-center p-2",children:[e.jsx(d,{xs:"auto",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",style:{width:"250px",borderRadius:10}})}),e.jsx(d,{xs:"auto",children:e.jsx(i,{type:"button",variant:"dark",style:{padding:"10px 20px",borderRadius:10},as:u,to:"/news/new",children:"New News"})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",style:{width:"100%",textAlign:"center"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"center"},children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Heading"}),e.jsx("th",{style:{textAlign:"center"},children:"Author"}),e.jsx("th",{style:{textAlign:"center"},children:"Image"}),e.jsx("th",{style:{textAlign:"center"},children:"Author Image"}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:y.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"middle"},children:t.type}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.heading}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.author}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.image?e.jsx("img",{src:t.image,alt:"news",style:{width:"50px",height:"auto",borderRadius:2}}):"N/A"}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.authorImage?e.jsx("img",{src:t.authorImage,alt:"author",style:{width:"50px",height:"auto",borderRadius:50}}):"N/A"}),e.jsxs("td",{style:{verticalAlign:"middle"},children:[e.jsx(i,{type:"button",variant:"primary",className:"me-2",as:u,to:`/news/edit/${t.id}`,children:e.jsx(j,{icon:"mdi:pencil"})}),e.jsx(i,{type:"button",variant:"danger",onClick:()=>b(t.id),children:e.jsx(j,{icon:"ri:delete-bin-4-fill"})})]})]},s))})]})})]})})}),e.jsxs(l,{show:w,onHide:o,centered:!0,children:[e.jsx(l.Header,{closeButton:!0,children:e.jsx(l.Title,{children:"Delete News"})}),e.jsx(l.Body,{children:"Are you sure you want to delete this news? This action cannot be undone."}),e.jsxs(l.Footer,{children:[e.jsx(i,{variant:"secondary",onClick:o,children:"Cancel"}),e.jsx(i,{variant:"danger",onClick:A,children:"Delete"})]})]})]})};export{W as default};
