import{a as te,r,j as e,T as ae,g as oe,h as re}from"./index-DPuNUjLg.js";import{l as ie}from"./cropper-MwML4X9w.js";import{I as n}from"./IconifyIcon-CRmgpD-A.js";import{a as ne}from"./api-alN533tX.js";import{P as le}from"./PageTitle-CqWn3q0T.js";import{l as ce}from"./logo-sm-DeRMNujR.js";import{R as T,C as S}from"./Row-CcHO1i0D.js";import{C as I}from"./Card-BZ6UHl2I.js";import{C as q}from"./CardBody-CGT1fL4u.js";import{F as a}from"./Form-LPEeaXcj.js";import{B as i}from"./Button-BnjsKorX.js";import"./iconify-CwHMartp.js";import"./CardHeaderContext-DMcAJQTf.js";import"./divWithClassName-CR8nEuA8.js";import"./FormCheck-KaS-eO03.js";import"./FormContext-BlvwWdud.js";import"./ElementChildren-ChJp8XjW.js";import"./FormControl-bLwLOBBO.js";import"./FormLabel-B_CILb4g.js";import"./Button-CXwj5S0n.js";const Le=()=>{const J=te(),[P,p]=r.useState(!1),[G,h]=r.useState(""),[F,E]=r.useState(null),[j,D]=r.useState(null),[x,K]=r.useState(""),[g,A]=r.useState(""),[f,M]=r.useState(""),[b,O]=r.useState(""),[C,z]=r.useState(""),[y,U]=r.useState(""),[m,v]=r.useState([""]),[u,N]=r.useState([""]),[d,R]=r.useState([{heading:"",description:""}]),[k,w]=r.useState(!1),c=r.useRef(null),B=200/200,H=s=>{const t=s.target.files[0];if(t){const o=new FileReader;o.onload=()=>{E(o.result)},o.readAsDataURL(t)}},_=()=>{var t;const s=(t=c.current)==null?void 0:t.cropper;s&&s.getCroppedCanvas().toBlob(o=>{D(o)})},Z=()=>{v([...m,""])},$=s=>{const t=m.filter((o,l)=>l!==s);v(t)},Q=(s,t)=>{const o=[...m];o[s]=t,v(o)},V=()=>{N([...u,""])},W=s=>{const t=u.filter((o,l)=>l!==s);N(t)},X=(s,t)=>{const o=[...u];o[s]=t,N(o)},Y=()=>{R([...d,{heading:"",description:""}])},ee=s=>{const t=d.filter((o,l)=>l!==s);R(t)},L=(s,t,o)=>{const l=[...d];l[s]={...l[s],[t]:o},R(l)},se=async()=>{if(!j){h("Please crop the image first."),p(!0);return}if(!x||!g||!f||!b||!C||!y||m.length===0||u.length===0||d.length===0){h("Please fill all required fields."),p(!0);return}w(!0);const s=new FormData;s.append("logo",j,"job-logo.png"),s.append("companyName",x),s.append("position",g),s.append("jobMode",f),s.append("salary",b),s.append("place",C),s.append("jobDescription",y),s.append("keyResponsibilities",JSON.stringify(m.filter(t=>t.trim()!==""))),s.append("requirements",JSON.stringify(u.filter(t=>t.trim()!==""))),s.append("benefits",JSON.stringify(d.filter(t=>t.heading.trim()!==""||t.description.trim()!=="")));try{(await ne.post("/jobs/create",s,{headers:{"Content-Type":"multipart/form-data"}})).status===201?(h("Job created successfully!"),p(!0),setTimeout(()=>{J("/job")},2e3)):(h("Failed to create job."),p(!0))}catch(t){console.error("Error creating job:",t),h("Failed to create job. Please try again."),p(!0)}finally{w(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"New Job"}),e.jsxs(ae,{onClose:()=>p(!1),show:P,delay:2e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(oe,{children:[e.jsx("img",{src:ce,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(re,{children:G})]}),e.jsx(T,{children:e.jsx(S,{xs:12,children:e.jsx(I,{children:e.jsx(q,{children:e.jsxs(T,{children:[e.jsxs(S,{lg:9,children:[e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Upload Job Logo (200x200)"}),e.jsx(a.Control,{type:"file",accept:"image/*",onChange:H})]}),F&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"img-container",children:e.jsx(ie,{src:F,style:{height:400,width:"100%"},initialAspectRatio:B,aspectRatio:B,guides:!1,crop:_,ref:c,rotatable:!0,scalable:!0,zoomable:!0})}),e.jsx(I,{children:e.jsx(q,{children:e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsxs(i,{onClick:()=>{var s;return(s=c.current)==null?void 0:s.cropper.zoom(.1)},children:[e.jsx(n,{icon:"mdi:magnify-plus-outline"})," ","Zoom In"]}),e.jsxs(i,{onClick:()=>{var s;return(s=c.current)==null?void 0:s.cropper.zoom(-.1)},children:[e.jsx(n,{icon:"mdi:magnify-minus-outline"})," ","Zoom Out"]}),e.jsxs(i,{onClick:()=>{var s;return(s=c.current)==null?void 0:s.cropper.rotate(-45)},children:[e.jsx(n,{icon:"mdi:rotate-left"})," Rotate Left"]}),e.jsxs(i,{onClick:()=>{var s;return(s=c.current)==null?void 0:s.cropper.rotate(45)},children:[e.jsx(n,{icon:"mdi:rotate-right"})," Rotate Right"]}),e.jsxs(i,{onClick:()=>{var s;return(s=c.current)==null?void 0:s.cropper.reset()},children:[e.jsx(n,{icon:"mdi:sync"})," Reset"]}),e.jsxs(i,{onClick:()=>{var s;return(s=c.current)==null?void 0:s.cropper.clear()},children:[e.jsx(n,{icon:"mdi:close"})," Clear"]})]})})})]})]}),e.jsxs(S,{lg:3,children:[e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Company Name"}),e.jsx(a.Control,{type:"text",value:x,onChange:s=>K(s.target.value),placeholder:"Enter company name"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Position"}),e.jsx(a.Control,{type:"text",value:g,onChange:s=>A(s.target.value),placeholder:"Enter position"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Job Mode"}),e.jsxs(a.Control,{as:"select",value:f,onChange:s=>M(s.target.value),children:[e.jsx("option",{value:"",children:"Select job mode"}),e.jsx("option",{value:"Full-Time",children:"Full Time"}),e.jsx("option",{value:"Part-Time",children:"Part Time"}),e.jsx("option",{value:"Freelance",children:"Freelance"}),e.jsx("option",{value:"Internship",children:"Internship"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Salary"}),e.jsx(a.Control,{type:"text",value:b,onChange:s=>O(s.target.value),placeholder:"Enter salary"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Place"}),e.jsx(a.Control,{type:"text",value:C,onChange:s=>z(s.target.value),placeholder:"Enter place"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Job Description"}),e.jsx(a.Control,{as:"textarea",rows:3,value:y,onChange:s=>U(s.target.value),placeholder:"Enter job description"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Key Responsibilities"}),m.map((s,t)=>e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(a.Control,{type:"text",value:s,onChange:o=>Q(t,o.target.value),placeholder:`Responsibility ${t+1}`}),e.jsx(i,{variant:"danger",className:"ms-2",onClick:()=>$(t),children:e.jsx(n,{icon:"mdi:delete"})})]},t)),e.jsxs(i,{variant:"secondary",className:"w-100",onClick:Z,children:[e.jsx(n,{icon:"mdi:plus"})," Add Responsibility"]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Requirements"}),u.map((s,t)=>e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(a.Control,{type:"text",value:s,onChange:o=>X(t,o.target.value),placeholder:`Requirement ${t+1}`}),e.jsx(i,{variant:"danger",className:"ms-2",onClick:()=>W(t),children:e.jsx(n,{icon:"mdi:delete"})})]},t)),e.jsxs(i,{variant:"secondary",className:"w-100",onClick:V,children:[e.jsx(n,{icon:"mdi:plus"})," Add Requirement"]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Benefits"}),d.map((s,t)=>e.jsxs("div",{className:"mb-2 p-2 border rounded",children:[e.jsx(a.Control,{type:"text",value:s.heading,onChange:o=>L(t,"heading",o.target.value),placeholder:"Benefit Heading",className:"mb-2"}),e.jsx(a.Control,{type:"text",value:s.description,onChange:o=>L(t,"description",o.target.value),placeholder:"Benefit Description",className:"mb-2"}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(i,{variant:"danger",onClick:()=>ee(t),disabled:d.length===1,children:e.jsx(n,{icon:"mdi:delete"})})})]},t)),e.jsxs(i,{variant:"secondary",className:"w-100 mt-2",onClick:Y,children:[e.jsx(n,{icon:"mdi:plus"})," Add Benefit"]})]}),e.jsx(i,{variant:"primary",className:"w-100 mt-3",onClick:se,disabled:!j||k,children:k?"Creating...":"Create Job"})]})]})})})})})]})};export{Le as default};
