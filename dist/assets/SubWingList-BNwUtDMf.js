import{r,j as e,T as v,h as N,i as T,L as h}from"./index-DvBs_XxN.js";import{P as k}from"./PageTitle-JyfAtr6J.js";import{a as j}from"./api-CQpZrRPq.js";import{I as d}from"./IconifyIcon-B1qkdp1h.js";import{l as M}from"./logo-sm-Bq_R7RX3.js";import{R as B}from"./Row-4F2rpKTs.js";import{C as I}from"./Col-X6kS0LVx.js";import{C as u}from"./Card-DacR5r0v.js";import{B as o}from"./Button-C42B3a1V.js";import{T as E}from"./Table-Dkw2e96E.js";import{B as L}from"./Badge-O448M9V6.js";import{M as n}from"./Modal-CisFgvMH.js";import"./iconify-BL8OsjYR.js";import"./CardHeaderContext-D448mrBQ.js";import"./divWithClassName-BHTNlR0-.js";import"./Button-DgXctBpM.js";import"./AbstractModalHeader-Bv6kTXjx.js";import"./useWindow-BTd5z_xy.js";import"./usePrevious-BDineeon.js";import"./useEventCallback-Dq8VwJIV.js";import"./hasClass-BEnhx4ws.js";import"./useMergedRefs-zTyG0_SU.js";import"./NoopTransition-B0RGQHIG.js";import"./DataKey-COGXBUcQ.js";const re=()=>{const[p,m]=r.useState([]),[f,a]=r.useState(!1),[i,x]=r.useState(null),[g,l]=r.useState(!1),[w,c]=r.useState(""),[y,b]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const t=await j.get("/sub-wing");t.status===200&&m(t.data.data)}catch(t){console.error("Error fetching sub-wings:",t),c("Failed to load sub-wings"),l(!0)}finally{b(!1)}})()},[]);const C=s=>{x(s),a(!0)},S=async()=>{if(i)try{await j.delete(`/sub-wing/${i.id}`),m(s=>s.filter(t=>t.id!==i.id)),c("Sub-wing deleted successfully!"),l(!0)}catch(s){console.error("Error deleting sub-wing:",s),c("Failed to delete sub-wing"),l(!0)}finally{a(!1),x(null)}};return y?e.jsx("div",{className:"d-flex justify-content-center p-5",children:"Loading..."}):e.jsxs("div",{className:"d-flex p-4",children:[e.jsx(k,{title:"Sub-Wings"}),e.jsxs(v,{onClose:()=>l(!1),show:g,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(N,{children:[e.jsx("img",{src:M,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"KMCC"})]}),e.jsx(T,{children:w})]}),e.jsx(B,{className:"w-100",children:e.jsx(I,{xs:12,children:e.jsx(u,{children:e.jsxs(u.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h4",{children:"Sub-Wings Management"}),e.jsxs(o,{variant:"primary",as:h,to:"/sub-wing/new",children:[e.jsx(d,{icon:"mdi:plus",className:"me-1"}),"Create New"]})]}),e.jsxs(E,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Icon"}),e.jsx("th",{children:"Members"}),e.jsx("th",{children:"Colors"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:p.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:t+1}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.icon?e.jsx("img",{src:s.icon,alt:s.name,style:{height:"30px"}}):e.jsx("span",{className:"text-muted",children:"No icon"})}),e.jsx("td",{children:e.jsx(L,{bg:"info",children:s.memberCount})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:s.backgroundColor,border:"1px solid #ddd"},title:`Background: ${s.backgroundColor}`}),e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:s.mainColor,border:"1px solid #ddd"},title:`Main color: ${s.mainColor}`})]})}),e.jsxs("td",{children:[e.jsx(o,{variant:"info",size:"sm",className:"me-2",as:h,to:`/sub-wing/${s.id}`,children:e.jsx(d,{icon:"mdi:eye",color:"white"})}),e.jsx(o,{variant:"primary",size:"sm",className:"me-2",as:h,to:`/sub-wing/edit/${s.id}`,children:e.jsx(d,{icon:"mdi:pencil",color:"white"})}),e.jsx(o,{variant:"danger",size:"sm",onClick:()=>C(s),children:e.jsx(d,{icon:"mdi:delete",color:"white"})})]})]},s.id))})]})]})})})}),e.jsxs(n,{show:f,onHide:()=>a(!1),centered:!0,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Delete Sub-Wing"})}),e.jsxs(n.Body,{children:['Are you sure you want to delete "',i==null?void 0:i.name,'"? This action cannot be undone.']}),e.jsxs(n.Footer,{children:[e.jsx(o,{variant:"secondary",onClick:()=>a(!1),children:"Cancel"}),e.jsx(o,{variant:"danger",onClick:S,children:"Delete"})]})]})]})};export{re as default};
