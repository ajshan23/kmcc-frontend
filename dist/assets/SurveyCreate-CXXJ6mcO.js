import{u as T,r as a,j as e,T as S,h as N,i as w}from"./index-KHl5Zwey.js";import{I}from"./IconifyIcon-DTxnPJmw.js";import{a as b}from"./api-CQpZrRPq.js";import{P as E}from"./PageTitle-ltcpd1T0.js";import{l as F}from"./logo-sm-Bq_R7RX3.js";import{R as h}from"./Row-DTReupHh.js";import{C as B}from"./Col-DQW9fkJI.js";import{C as D,a as L}from"./Card-BPUBYUYl.js";import{F as t}from"./Form-DV8yfCFc.js";import{B as M}from"./Button-Dtqr-UsE.js";import"./iconify-RmtcZ_gc.js";import"./CardHeaderContext-CHseNdA8.js";import"./divWithClassName-UUPJNpO1.js";import"./FormCheck-D1EV8qhw.js";import"./FormContext-DpqmDVdf.js";import"./FormCheckInput-BBmIHxcd.js";import"./ElementChildren-D9By0SA4.js";import"./FormControl-C6itCDlW.js";import"./FormLabel-BVDa38dv.js";import"./Button-C66-hUbx.js";const ee=()=>{const x=T(),[g,i]=a.useState(!1),[j,f]=a.useState(""),[n,l]=a.useState(!1),[c,y]=a.useState(""),[m,v]=a.useState(""),o=s=>{f(s),i(!0)},C=async()=>{var d,p,u;l(!0);const s=new FormData;s.append("title",c),s.append("description",m);try{const r=await b.post("/survey",s);r.status===201?(o("Survey created successfully!"),setTimeout(()=>x("/survey"),2e3)):o(((d=r.data)==null?void 0:d.message)||"Failed to create survey.")}catch(r){o(((u=(p=r.response)==null?void 0:p.data)==null?void 0:u.message)||"Error creating survey. Please try again.")}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"New Survey"}),e.jsxs(S,{onClose:()=>i(!1),show:g,delay:2e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(N,{children:[e.jsx("img",{src:F,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(w,{children:j})]}),e.jsx(h,{children:e.jsx(B,{xs:12,children:e.jsx(D,{children:e.jsx(L,{children:e.jsxs(h,{className:"p-10",children:[e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Title"}),e.jsx(t.Control,{type:"text",value:c,onChange:s=>y(s.target.value),placeholder:"Enter title"})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Description"}),e.jsx(t.Control,{type:"text",value:m,onChange:s=>v(s.target.value),placeholder:"Enter description"})]}),e.jsx(M,{variant:"primary",className:"w-100 mt-3",onClick:C,disabled:n,children:n?"Creating...":e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:"mdi:upload"})," Create Survey"]})})]})})})})})]})};export{ee as default};
