import{c as Q}from"./useWindow-DCzQeojC.js";import{J as X,r,B as Y,I as ee,G as te,l as N,j as v,m as P,x as K,v as W,w as ne,F as $,Z as S,M as se,$ as oe,P as re}from"./index-Dgt01rRE.js";import{a as ae}from"./hook-u_Ubg2i1.js";import{b as le,g as ie,u as U,a as ce,m as ue}from"./mergeOptionsWithPopperConfig-B4ErNzMh.js";import{u as de}from"./useMergedRefs-QY4Cj_bT.js";import{u as fe}from"./useEventCallback-BeMQHgY7.js";import{u as H,r as me,h as I}from"./hasClass-C7d_5_jD.js";import{u as he}from"./useIsomorphicEffect-BXHfN3Qu.js";const pe=()=>{};function ve(e,n,{disabled:t,clickTrigger:s}={}){const o=n||pe;le(e,o,{disabled:t,clickTrigger:s});const l=fe(i=>{X(i)&&o(i)});r.useEffect(()=>{if(t||e==null)return;const i=Y(ie(e));let h=(i.defaultView||window).event;const u=ee(i,"keyup",f=>{if(f===h){h=void 0;return}l(f)});return()=>{u()}},[e,t,l])}const z=r.forwardRef((e,n)=>{const{flip:t,offset:s,placement:o,containerPadding:l,popperConfig:i={},transition:h,runTransition:u}=e,[f,R]=U(),[w,y]=U(),m=de(R,n),d=H(e.container),x=H(e.target),[a,p]=r.useState(!e.show),c=ce(x,f,ue({placement:o,enableEvents:!!e.show,containerPadding:l||5,flip:t,offset:s,arrowElement:w,popperConfig:i}));e.show&&a&&p(!1);const T=(..._)=>{p(!0),e.onExited&&e.onExited(..._)},E=e.show||!a;if(ve(f,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!E)return null;const{onExit:F,onExiting:C,onEnter:O,onEntering:j,onEntered:M}=e;let b=e.children(Object.assign({},c.attributes.popper,{style:c.styles.popper,ref:m}),{popper:c,placement:o,show:!!e.show,arrowProps:Object.assign({},c.attributes.arrow,{style:c.styles.arrow,ref:y})});return b=me(h,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:b,onExit:F,onExiting:C,onExited:T,onEnter:O,onEntering:j,onEntered:M}),d?te.createPortal(b,d):null});z.displayName="Overlay";const A=r.forwardRef(({className:e,bsPrefix:n,as:t="div",...s},o)=>(n=N(n,"popover-header"),v.jsx(t,{ref:o,className:P(e,n),...s})));A.displayName="PopoverHeader";const B=r.forwardRef(({className:e,bsPrefix:n,as:t="div",...s},o)=>(n=N(n,"popover-body"),v.jsx(t,{ref:o,className:P(e,n),...s})));B.displayName="PopoverBody";function G(e,n){let t=e;return e==="left"?t=n?"end":"start":e==="right"&&(t=n?"start":"end"),t}function J(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const ge=r.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:s,children:o,body:l,arrowProps:i,hasDoneInitialMeasure:h,popper:u,show:f,...R},w)=>{const y=N(e,"popover"),m=K(),[d]=(n==null?void 0:n.split("-"))||[],x=G(d,m);let a=s;return f&&!h&&(a={...s,...J(u==null?void 0:u.strategy)}),v.jsxs("div",{ref:w,role:"tooltip",style:a,"x-placement":d,className:P(t,y,d&&`bs-popover-${x}`),...R,children:[v.jsx("div",{className:"popover-arrow",...i}),l?v.jsx(B,{children:o}):o]})}),Re=Object.assign(ge,{Header:A,Body:B,POPPER_OFFSET:[0,8]}),V=r.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:s,children:o,arrowProps:l,hasDoneInitialMeasure:i,popper:h,show:u,...f},R)=>{e=N(e,"tooltip");const w=K(),[y]=(n==null?void 0:n.split("-"))||[],m=G(y,w);let d=s;return u&&!i&&(d={...s,...J(h==null?void 0:h.strategy)}),v.jsxs("div",{ref:R,style:d,role:"tooltip","x-placement":y,className:P(t,e,`bs-tooltip-${m}`),...f,children:[v.jsx("div",{className:"tooltip-arrow",...l}),v.jsx("div",{className:`${e}-inner`,children:o})]})});V.displayName="Tooltip";const we=Object.assign(V,{TOOLTIP_OFFSET:[0,6]});function ye(e){const n=r.useRef(null),t=N(void 0,"popover"),s=N(void 0,"tooltip"),o=r.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(n.current){if(I(n.current,t))return Re.POPPER_OFFSET;if(I(n.current,s))return we.TOOLTIP_OFFSET}return[0,0]}}}),[e,t,s]);return[n,[o]]}function Ee(e,n){const{ref:t}=e,{ref:s}=n;e.ref=t.__wrapped||(t.__wrapped=o=>t(S(o))),n.ref=s.__wrapped||(s.__wrapped=o=>s(S(o)))}const Z=r.forwardRef(({children:e,transition:n=$,popperConfig:t={},rootClose:s=!1,placement:o="top",show:l=!1,...i},h)=>{const u=r.useRef({}),[f,R]=r.useState(null),[w,y]=ye(i.offset),m=W(h,w),d=n===!0?$:n||void 0,x=ne(a=>{R(a),t==null||t.onFirstUpdate==null||t.onFirstUpdate(a)});return he(()=>{f&&i.target&&(u.current.scheduleUpdate==null||u.current.scheduleUpdate())},[f,i.target]),r.useEffect(()=>{l||R(null)},[l]),v.jsx(z,{...i,ref:m,popperConfig:{...t,modifiers:y.concat(t.modifiers||[]),onFirstUpdate:x},transition:d,rootClose:s,placement:o,show:l,children:(a,{arrowProps:p,popper:c,show:T})=>{var E;Ee(a,p);const F=c==null?void 0:c.placement,C=Object.assign(u.current,{state:c==null?void 0:c.state,scheduleUpdate:c==null?void 0:c.update,placement:F,outOfBoundaries:(c==null||(E=c.state)==null||(E=E.modifiersData.hide)==null?void 0:E.isReferenceHidden)||!1,strategy:t.strategy}),O=!!f;return typeof e=="function"?e({...a,placement:F,show:T,...!n&&T&&{className:"show"},popper:C,arrowProps:p,hasDoneInitialMeasure:O}):r.cloneElement(e,{...a,placement:F,arrowProps:p,popper:C,hasDoneInitialMeasure:O,className:P(e.props.className,!n&&T&&"show"),style:{...e.props.style,...a.style}})}})});Z.displayName="Overlay";function Oe(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function L(e,n,t){const[s]=n,o=s.currentTarget,l=s.relatedTarget||s.nativeEvent[t];(!l||l!==o)&&!Q(o,l)&&e(...n)}re.oneOf(["click","hover","focus"]);const je=({trigger:e=["hover","focus"],overlay:n,children:t,popperConfig:s={},show:o,defaultShow:l=!1,onToggle:i,delay:h,placement:u,flip:f=u&&u.indexOf("auto")!==-1,...R})=>{const w=r.useRef(null),y=W(w,se(t)),m=oe(),d=r.useRef(""),[x,a]=ae(o,l,i),p=Oe(h),{onFocus:c,onBlur:T,onClick:E}=typeof t!="function"?r.Children.only(t).props:{},F=g=>{y(S(g))},C=r.useCallback(()=>{if(m.clear(),d.current="show",!p.show){a(!0);return}m.set(()=>{d.current==="show"&&a(!0)},p.show)},[p.show,a,m]),O=r.useCallback(()=>{if(m.clear(),d.current="hide",!p.hide){a(!1);return}m.set(()=>{d.current==="hide"&&a(!1)},p.hide)},[p.hide,a,m]),j=r.useCallback((...g)=>{C(),c==null||c(...g)},[C,c]),M=r.useCallback((...g)=>{O(),T==null||T(...g)},[O,T]),b=r.useCallback((...g)=>{a(!x),E==null||E(...g)},[E,a,x]),_=r.useCallback((...g)=>{L(C,g,"fromElement")},[C]),q=r.useCallback((...g)=>{L(O,g,"toElement")},[O]),D=e==null?[]:[].concat(e),k={ref:F};return D.indexOf("click")!==-1&&(k.onClick=b),D.indexOf("focus")!==-1&&(k.onFocus=j,k.onBlur=M),D.indexOf("hover")!==-1&&(k.onMouseOver=_,k.onMouseOut=q),v.jsxs(v.Fragment,{children:[typeof t=="function"?t(k):r.cloneElement(t,k),v.jsx(Z,{...R,show:x,onHide:O,flip:f,placement:u,popperConfig:s,target:w.current,children:n})]})};export{je as O,Re as P,we as T,B as a,A as b};
