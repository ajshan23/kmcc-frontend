import{d as y,u as C,r as i,j as e,T as h}from"./index-tNgA7nGT.js";import{a as S}from"./api-CQpZrRPq.js";import{P as D}from"./PageTitle-CCkfjASR.js";import{R as F}from"./Row-RifMysLS.js";import{C as T}from"./Col-CnORAU6q.js";import{C as x}from"./Card-B1tYBRGQ.js";import{F as s}from"./Form-Dv6oRs5P.js";import{B as f}from"./Button-CENta7Bz.js";import{S as w}from"./Spinner-DN05z5fI.js";import"./CardHeaderContext-BtYRO3IT.js";import"./divWithClassName-BkIstr-m.js";import"./FormCheck-Bgt48iIR.js";import"./FormContext-DD_I2OzJ.js";import"./FormCheckInput-B2vMIfyo.js";import"./ElementChildren-DV_13d0k.js";import"./FormControl-CbvVdWru.js";import"./FormLabel-C90nlSEw.js";import"./Button-CXeEohPr.js";const Q=()=>{const{id:a}=y(),l=C(),[o,d]=i.useState(!1),[j,n]=i.useState(!1),[v,m]=i.useState(""),[t,p]=i.useState({amount:"",notes:""}),b=async r=>{var u,c;if(r.preventDefault(),!t.amount||parseFloat(t.amount)<=0){m("Please enter a valid amount"),n(!0);return}d(!0);try{await S.post(`/investments/${a}/deposits`,{amount:parseFloat(t.amount),notes:t.notes}),m("Deposit recorded successfully!"),n(!0),setTimeout(()=>l(`/investments/${a}`),1500)}catch(g){m(((c=(u=g.response)==null?void 0:u.data)==null?void 0:c.message)||"Failed to record deposit"),n(!0)}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Add Deposit",breadcrumbItems:[{label:"Investments",path:"/investments"},{label:`Investment #${a}`,path:`/investments/${a}`},{label:"Add Deposit",active:!0}]}),e.jsx(h,{onClose:()=>n(!1),show:j,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:e.jsx(h.Body,{children:v})}),e.jsx(F,{children:e.jsx(T,{md:6,children:e.jsx(x,{children:e.jsx(x.Body,{children:e.jsxs(s,{onSubmit:b,children:[e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Amount*"}),e.jsx(s.Control,{type:"number",step:"0.01",placeholder:"Enter deposit amount",value:t.amount,onChange:r=>p({...t,amount:r.target.value}),required:!0,disabled:o})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Notes"}),e.jsx(s.Control,{as:"textarea",rows:3,placeholder:"Optional notes",value:t.notes,onChange:r=>p({...t,notes:r.target.value}),disabled:o})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(f,{variant:"secondary",onClick:()=>l(`/investments/${a}`),disabled:o,children:"Cancel"}),e.jsx(f,{type:"submit",variant:"primary",disabled:o||!t.amount,children:o?e.jsx(w,{size:"sm",animation:"border"}):"Record Deposit"})]})]})})})})})]})};export{Q as default};
