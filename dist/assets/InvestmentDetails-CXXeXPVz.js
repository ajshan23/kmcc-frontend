import{d as k,u as R,r,j as e,T as g}from"./index-CWxK9h8P.js";import{a as b}from"./api-CQpZrRPq.js";import{P as E}from"./PageTitle-DWsonpDE.js";import{I as l}from"./IconifyIcon-CC4OnH-e.js";import{S as F}from"./Spinner-Dqj128jD.js";import{C as a}from"./Card-DZFDkilJ.js";import{R as K}from"./Row-C2I4GQ41.js";import{C as y}from"./Col-BXHEcCf6.js";import{B as c}from"./Badge-BJiw47KL.js";import{B as d}from"./Button-CQasjNBg.js";import{T as M}from"./Tabs-Bj7yUCij.js";import{T as D}from"./Tab-jApOzB5c.js";import{T as S}from"./Table-DywIZmfJ.js";import{A as z}from"./Alert-CtcnMIOd.js";import"./iconify-BL2rH4cv.js";import"./CardHeaderContext-ijBDOs9Q.js";import"./divWithClassName-B3-UALgE.js";import"./Button-Rbr09trj.js";import"./hook-DSKMHYPi.js";import"./extends-CF3RwP-h.js";import"./TabPane-dCV6sK0R.js";import"./Nav-qM_8uI7t.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-CaI_QTVY.js";import"./useMergedRefs-7j0TLQWM.js";import"./NavItem-D0FNkvvF.js";import"./useEventCallback-FbBVX3K_.js";import"./NavbarContext-B2_pjo0q.js";import"./NavLink-y_4XR7pe.js";import"./Anchor-DTXIp3XK.js";import"./NoopTransition-N-W7GiHR.js";import"./ElementChildren-C4XOSt_6.js";const ge=()=>{var h,x,j,p,u,f;const{id:n}=k(),o=R(),[t,N]=r.useState(null),[P,w]=r.useState(!0),[T,A]=r.useState("deposits"),[I,m]=r.useState(!1),[L,$]=r.useState(""),[i,C]=r.useState(null);return r.useEffect(()=>{(async()=>{try{const[v,B]=await Promise.all([b.get(`/investments/${n}`),b.get(`/investments/${n}/profit-summary`)]);N(v.data.data),C(B.data.data)}catch{$("Failed to load investment data"),m(!0)}finally{w(!1)}})()},[n]),P?e.jsx("div",{className:"d-flex justify-content-center p-5",children:e.jsx(F,{animation:"border"})}):t?e.jsxs(e.Fragment,{children:[e.jsx(E,{title:`Investment - ${((h=t.user)==null?void 0:h.name)||"N/A"}`,breadcrumbItems:[{label:"Investments",path:"/investments"},{label:((x=t.user)==null?void 0:x.name)||"Investment",active:!0}]}),e.jsx(g,{onClose:()=>m(!1),show:I,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:e.jsx(g.Body,{children:L})}),e.jsx(a,{className:"mb-4",children:e.jsxs(a.Body,{children:[e.jsxs(K,{children:[e.jsxs(y,{md:6,children:[e.jsx("h4",{children:((j=t.user)==null?void 0:j.name)||"N/A"}),e.jsxs("p",{className:"text-muted",children:["Member ID: ",((p=t.user)==null?void 0:p.memberId)||"N/A"]}),e.jsxs("div",{className:"d-flex gap-2 mb-3",children:[e.jsx(c,{bg:t.isActive?"success":"secondary",children:t.isActive?"Active":"Closed"}),e.jsxs(c,{bg:"info",children:["$",t.totalDeposited.toLocaleString()," Deposited"]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{bg:"warning",children:["$",i.totalProfit.toLocaleString()," Profit"]}),e.jsxs(c,{bg:"success",children:["$",i.profitDistributed.toLocaleString()," Paid"]})]})]})]}),e.jsxs(y,{md:6,className:"text-end",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Started:"})," ",new Date(t.startDate).toLocaleDateString()]}),t.endDate&&e.jsxs("p",{children:[e.jsx("strong",{children:"Ended:"})," ",new Date(t.endDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[t.isActive&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"primary",onClick:()=>o(`/investments/${n}/deposits/new`),children:[e.jsx(l,{icon:"mdi:cash-plus",className:"me-1"}),"Add Deposit"]}),e.jsxs(d,{variant:"warning",onClick:()=>o(`/investments/${n}/profits/new`),children:[e.jsx(l,{icon:"mdi:finance",className:"me-1"}),"Add Profit"]}),e.jsxs(d,{variant:"success",onClick:()=>o(`/investments/${n}/profit-payouts/new`),children:[e.jsx(l,{icon:"mdi:cash-multiple",className:"me-1"}),"Distribute Profit"]})]}),e.jsx(d,{variant:"secondary",onClick:()=>o("/investments"),children:"Back to List"})]})]})}),e.jsxs(M,{activeKey:T,onSelect:s=>A(s||"deposits"),className:"mb-3",children:[e.jsx(D,{eventKey:"deposits",title:"Deposits",children:e.jsx(a,{children:e.jsx(a.Body,{children:e.jsxs(S,{striped:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Notes"})]})}),e.jsx("tbody",{children:(u=t.deposits)==null?void 0:u.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(s.depositDate).toLocaleDateString()}),e.jsxs("td",{children:["$",s.amount.toLocaleString()]}),e.jsx("td",{children:s.notes||"-"})]},s.id))})]})})})}),e.jsx(D,{eventKey:"profit-payouts",title:"Profit Payouts",children:e.jsx(a,{children:e.jsxs(a.Body,{children:[i&&e.jsx(z,{variant:"info",className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:["Total Profit:"," ",e.jsxs("strong",{children:["$",i.totalProfit.toLocaleString()]})]}),e.jsxs("span",{children:["Pending:"," ",e.jsxs("strong",{children:["$",i.profitPending.toLocaleString()]})]}),e.jsxs("span",{children:["Distributed:"," ",e.jsxs("strong",{children:["$",i.profitDistributed.toLocaleString()]})]})]})}),e.jsxs(S,{striped:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Notes"})]})}),e.jsx("tbody",{children:(f=t.profitPayouts)==null?void 0:f.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(s.payoutDate).toLocaleDateString()}),e.jsxs("td",{children:["$",s.amount.toLocaleString()]}),e.jsx("td",{children:s.notes||"-"})]},s.id))})]})]})})})]})]}):e.jsx("div",{className:"d-flex justify-content-center p-5",children:"Investment not found"})};export{ge as default};
