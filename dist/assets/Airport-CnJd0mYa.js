import{r,j as e,T as N,h as S,i as I,L as x}from"./index-tNgA7nGT.js";import{P as M}from"./PageTitle-CCkfjASR.js";import{a as j}from"./api-CQpZrRPq.js";import{I as u}from"./IconifyIcon-s9Hyo8eO.js";import{l as D}from"./logo-sm-Bq_R7RX3.js";import{C as k}from"./Container-DAYvR0q4.js";import{R as f}from"./Row-RifMysLS.js";import{C as d}from"./Col-CnORAU6q.js";import{B as s}from"./Button-CENta7Bz.js";import{T as E}from"./Table-CZGqjMOQ.js";import{M as i}from"./Modal-XWv4zo73.js";import"./iconify-RXcx2lhF.js";import"./Button-CXeEohPr.js";import"./AbstractModalHeader-_KRINFje.js";import"./useWindow-BY7h8nM3.js";import"./usePrevious-BewAhWrh.js";import"./useEventCallback-pYaJC5nB.js";import"./hasClass-B91NjqlQ.js";import"./useMergedRefs-CqwwmTTk.js";import"./NoopTransition-CWzBALoK.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-BkIstr-m.js";const te=()=>{const[y,c]=r.useState([]),[g,h]=r.useState(!1),[o,p]=r.useState(null),[A,m]=r.useState(""),[w,l]=r.useState(!1);r.useEffect(()=>{v()},[]);const v=async()=>{try{const t=await j.get("/airport");t.status===200&&c(t.data.data)}catch(t){console.error("Error fetching airports:",t)}},C=t=>{p(t),h(!0)},a=()=>{h(!1),p(null)},T=async()=>{if(o)try{(await j.delete(`/airport/${o}`)).status===200&&(c(n=>n.filter(b=>b.id!==o)),m("Airport deleted successfully!"),l(!0))}catch(t){console.error("Error deleting airport:",t),m("Failed to delete airport."),l(!0)}finally{a()}};return e.jsxs(k,{className:"p-4",children:[e.jsx(M,{title:"Airport"}),e.jsxs(N,{onClose:()=>l(!1),show:w,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(S,{children:[e.jsx("img",{src:D,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(I,{children:A})]}),e.jsx(f,{children:e.jsx(d,{xs:12,children:e.jsxs("div",{className:"p-3 bg-white border rounded",style:{width:"70vw"},children:[e.jsxs(f,{className:"d-flex justify-content-between align-items-center p-2",children:[e.jsx(d,{xs:"auto",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",style:{width:"250px",borderRadius:10}})}),e.jsx(d,{xs:"auto",children:e.jsx(s,{variant:"dark",as:x,to:"/airport/new",style:{padding:"10px 20px",borderRadius:10},children:"New Airport"})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs(E,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mt-3 text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"center"},children:"Name"}),e.jsx("th",{style:{textAlign:"center"},children:"Code"}),e.jsx("th",{style:{textAlign:"center"},children:"Country"}),e.jsx("th",{style:{textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:y.map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"middle"},children:t.name}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.iataCode}),e.jsx("td",{style:{verticalAlign:"middle"},children:t.country}),e.jsxs("td",{style:{verticalAlign:"middle"},children:[e.jsx(s,{variant:"primary",className:"me-2",as:x,to:`/airport/edit/${t.id}`,children:e.jsx(u,{icon:"mdi:pencil"})}),e.jsx(s,{variant:"danger",onClick:()=>C(t.id),children:e.jsx(u,{icon:"ri:delete-bin-4-fill"})})]})]},n))})]})})]})})}),e.jsxs(i,{show:g,onHide:a,centered:!0,children:[e.jsx(i.Header,{closeButton:!0,children:e.jsx(i.Title,{children:"Delete Airport"})}),e.jsx(i.Body,{children:"Are you sure you want to delete this airport? This action cannot be undone."}),e.jsxs(i.Footer,{children:[e.jsx(s,{variant:"secondary",onClick:a,children:"Cancel"}),e.jsx(s,{variant:"danger",onClick:T,children:"Delete"})]})]})]})};export{te as default};
