import{a as N,f as Q,r as s,j as e,T as M,g as k,h as D,L as E}from"./index-DTNBVJXJ.js";import{P as R}from"./PageTitle-BSd58_4C.js";import{a as f}from"./api-alN533tX.js";import{l as q}from"./logo-sm-DeRMNujR.js";import{I as B}from"./IconifyIcon-C822AO2m.js";import{C as A}from"./Container-C8uZIFSP.js";import{R as y,C as d}from"./Row-BAydH47-.js";import{B as o}from"./Button-D3ui8Ipe.js";import{T as H}from"./Table-CdBy4kPS.js";import{M as r}from"./Modal-DKRSr83T.js";import"./iconify-DGrS6a3F.js";import"./Button-LfktIHOk.js";import"./AbstractModalHeader-D6I5S5PL.js";import"./useWindow-xTJRIZxH.js";import"./usePrevious-Dd_7dJOG.js";import"./useEventCallback-Kge2rWHC.js";import"./hasClass-DSnRUSEg.js";import"./useMergedRefs-BnvYSThD.js";import"./NoopTransition-BwsqUNgw.js";import"./DataKey-COGXBUcQ.js";import"./divWithClassName-Bqr9clmc.js";const ie=()=>{const g=N(),{id:i}=Q(),[w,c]=s.useState([]),[v,u]=s.useState(!0),[T,h]=s.useState(!1),[a,x]=s.useState(null),[b,m]=s.useState(""),[C,p]=s.useState(!1);s.useEffect(()=>{i||g("/survey"),j()},[]);const j=async()=>{u(!0);try{const t=await f.get(`/survey/surveys/${i}/questions`);t.status===200&&c(t.data.data.questions)}catch(t){console.error("Error fetching questions:",t)}u(!1)},S=t=>{x(t),h(!0)},n=()=>{h(!1),x(null)},I=async()=>{if(a){c(t=>t.filter(l=>l.id!==a));try{if((await f.delete(`/survey/question/${a}`)).status!==200)throw new Error("Failed to delete");m("Question deleted successfully!")}catch(t){console.error("Error deleting question:",t),m("Failed to delete question."),j()}finally{p(!0),n()}}};return e.jsxs(A,{className:"p-4",children:[e.jsx(R,{title:"Questions"}),e.jsxs(M,{onClose:()=>p(!1),show:C,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(k,{children:[e.jsx("img",{src:q,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(D,{children:b})]}),e.jsx(y,{children:e.jsx(d,{xs:12,children:e.jsxs("div",{style:{width:"70vw",background:"white",border:"1px solid gray",padding:10,borderRadius:10},children:[e.jsxs(y,{className:"d-flex justify-content-between align-items-center p-2",children:[e.jsx(d,{xs:"auto",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",style:{width:"250px",borderRadius:10}})}),e.jsx(d,{xs:"auto",children:e.jsx(o,{variant:"dark",style:{padding:"10px 20px",borderRadius:10},to:`/add/questions/${i}`,as:E,children:"New Questions"})})]}),v?e.jsx("p",{className:"text-center mt-3",children:"Loading questions..."}):e.jsxs(H,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"mt-3 text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Survey Id"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Text"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:w.map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.surveyId}),e.jsx("td",{children:t.type}),e.jsx("td",{children:t.text}),e.jsx("td",{children:t.image?e.jsx("img",{src:t.image,alt:"Question",style:{width:"50px",height:"auto",borderRadius:2}}):"N/A"}),e.jsx("td",{style:{verticalAlign:"middle"},children:e.jsx(o,{type:"button",variant:"danger",onClick:()=>S(t.id),children:e.jsx(B,{color:"white",icon:"ri:delete-bin-4-fill"})})})]},l))})]})]})})}),e.jsxs(r,{show:T,onHide:n,centered:!0,children:[e.jsx(r.Header,{closeButton:!0,children:e.jsx(r.Title,{children:"Delete Question"})}),e.jsx(r.Body,{children:"Are you sure you want to delete this question? This action cannot be undone."}),e.jsxs(r.Footer,{children:[e.jsx(o,{variant:"secondary",onClick:n,children:"Cancel"}),e.jsx(o,{variant:"danger",onClick:I,children:"Delete"})]})]})]})};export{ie as default};
