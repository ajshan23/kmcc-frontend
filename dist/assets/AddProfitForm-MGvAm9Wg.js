import{d as y,u as C,r as i,j as t,T as f}from"./index-tbORj_h7.js";import{a as P}from"./api-BWS4aRsM.js";import{P as S}from"./PageTitle-B5UZOk6x.js";import"./iconify-C4gxA2ZK.js";import{R as T,C as F}from"./Row-BAKXF0E5.js";import{C as h}from"./Card-CS7mEMRp.js";import{F as s}from"./Form-CDi93_SM.js";import{B as x}from"./Button-Bd2MDoO7.js";import{S as w}from"./Spinner-i65u_QRX.js";import"./CardBody-DNeWABbn.js";import"./CardHeaderContext-DmhcPj-M.js";import"./divWithClassName-B7qpIybN.js";import"./FormCheck-D22FGpr8.js";import"./FormContext-DSTfdlBC.js";import"./ElementChildren-DWy4EH4n.js";import"./FormControl-Df9JJE9i.js";import"./FormLabel-D96uhRXc.js";import"./Button-DIcN3Qge.js";const Q=()=>{const{id:a}=y(),m=C(),[o,d]=i.useState(!1),[j,n]=i.useState(!1),[v,l]=i.useState(""),[e,u]=i.useState({amount:"",notes:""}),b=async r=>{var p,c;if(r.preventDefault(),!e.amount||parseFloat(e.amount)<=0){l("Please enter a valid profit amount"),n(!0);return}d(!0);try{await P.post(`/investments/${a}/profits`,{amount:parseFloat(e.amount),notes:e.notes}),l("Profit added successfully!"),n(!0),setTimeout(()=>m(`/investments/${a}`),1500)}catch(g){l(((c=(p=g.response)==null?void 0:p.data)==null?void 0:c.message)||"Failed to add profit"),n(!0)}finally{d(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx(S,{title:"Add Profit",breadcrumbItems:[{label:"Investments",path:"/investments"},{label:`Investment #${a}`,path:`/investments/${a}`},{label:"Add Profit",active:!0}]}),t.jsx(f,{onClose:()=>n(!1),show:j,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:t.jsx(f.Body,{children:v})}),t.jsx(T,{children:t.jsx(F,{md:6,children:t.jsx(h,{children:t.jsx(h.Body,{children:t.jsxs(s,{onSubmit:b,children:[t.jsxs(s.Group,{className:"mb-3",children:[t.jsx(s.Label,{children:"Profit Amount*"}),t.jsx(s.Control,{type:"number",step:"0.01",placeholder:"Enter profit amount",value:e.amount,onChange:r=>u({...e,amount:r.target.value}),required:!0,disabled:o}),t.jsx(s.Text,{className:"text-muted",children:"This adds to the total profit earned"})]}),t.jsxs(s.Group,{className:"mb-3",children:[t.jsx(s.Label,{children:"Notes"}),t.jsx(s.Control,{as:"textarea",rows:3,placeholder:"Optional notes",value:e.notes,onChange:r=>u({...e,notes:r.target.value}),disabled:o})]}),t.jsxs("div",{className:"d-flex gap-2",children:[t.jsx(x,{variant:"secondary",onClick:()=>m(`/investments/${a}`),disabled:o,children:"Cancel"}),t.jsx(x,{type:"submit",variant:"primary",disabled:o||!e.amount,children:o?t.jsx(w,{size:"sm",animation:"border"}):"Add Profit"})]})]})})})})})]})};export{Q as default};
