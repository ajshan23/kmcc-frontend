import{a as w,r as t,j as e,T as A,g as L,h as q}from"./index-DTNBVJXJ.js";import{a as G}from"./api-alN533tX.js";import{P}from"./PageTitle-BSd58_4C.js";import{l as B}from"./logo-sm-DeRMNujR.js";import{I as D}from"./IconifyIcon-C822AO2m.js";import{R as g,C as F}from"./Row-BAydH47-.js";import{C as R}from"./Card-LdjoLELL.js";import{C as H}from"./CardBody-ffggLUo-.js";import{F as s}from"./Form-C-a0Gm7P.js";import{B as V}from"./Button-D3ui8Ipe.js";import"./iconify-DGrS6a3F.js";import"./CardHeaderContext-Cg4WHjpo.js";import"./divWithClassName-Bqr9clmc.js";import"./FormCheck-BrI6a1VK.js";import"./FormContext-BNTEYguM.js";import"./ElementChildren-a0xZHth5.js";import"./FormControl-CXDbjkuY.js";import"./FormLabel-CLyi9vaj.js";import"./Button-LfktIHOk.js";const le=()=>{const N=w(),[f,o]=t.useState(!1),[v,n]=t.useState(""),[k,l]=t.useState("success"),[r,u]=t.useState(!1),[i,C]=t.useState(""),[m,I]=t.useState(""),[d,S]=t.useState(""),[h,y]=t.useState(""),[p,M]=t.useState("active"),[x,T]=t.useState(""),E=async()=>{var b,j;if(!i||!m||!d){n("Member ID, Iqama Number, and Name are required."),l("danger"),o(!0);return}u(!0);const a={memberId:i,iqamaNumber:m,name:d,phoneNumber:h,status:p,areaName:x};try{(await G.post("/admin/add-membership",a)).status===201&&(n("Membership added successfully."),l("success"),o(!0),setTimeout(()=>N("/membership"),2e3))}catch(c){console.error("Error adding membership:",c),n(((j=(b=c.response)==null?void 0:b.data)==null?void 0:j.message)||"Failed to add membership."),l("danger"),o(!0)}finally{u(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"New Membership"}),e.jsxs(A,{onClose:()=>o(!1),show:f,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(L,{children:[e.jsx("img",{src:B,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(q,{children:v})]}),e.jsx(g,{children:e.jsx(F,{xs:12,children:e.jsx(R,{children:e.jsx(H,{children:e.jsxs(g,{className:"p-10",children:[e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Member ID"}),e.jsx(s.Control,{type:"text",value:i,onChange:a=>C(a.target.value),placeholder:"Enter Member ID",disabled:r})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Iqama Number"}),e.jsx(s.Control,{type:"text",value:m,onChange:a=>I(a.target.value),placeholder:"Enter Iqama Number",disabled:r})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Name"}),e.jsx(s.Control,{type:"text",value:d,onChange:a=>S(a.target.value),placeholder:"Enter Name",disabled:r})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Phone Number"}),e.jsx(s.Control,{type:"text",value:h,onChange:a=>y(a.target.value),placeholder:"Enter Phone Number",disabled:r})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Status"}),e.jsxs(s.Select,{value:p,onChange:a=>M(a.target.value),disabled:r,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Area Name"}),e.jsx(s.Control,{type:"text",value:x,onChange:a=>T(a.target.value),placeholder:"Enter Area Name",disabled:r})]}),e.jsxs(V,{variant:"primary",className:"w-100 mt-3",onClick:E,disabled:r,children:[e.jsx(D,{icon:"mdi:account-plus"})," ",r?"Adding...":"Add Membership"]})]})})})})})]})};export{le as default};
