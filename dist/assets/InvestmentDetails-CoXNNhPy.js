import{d as k,u as R,r,j as e,T as g}from"./index-BJxyWXw5.js";import{a as b}from"./api-CQpZrRPq.js";import{P as E}from"./PageTitle-CrVvbIAm.js";import{I as l}from"./IconifyIcon-Bpb1MxQc.js";import{S as F}from"./Spinner-BnFYvPDL.js";import{C as a}from"./Card-tfBEtDvx.js";import{R as K}from"./Row-BL2JdXdK.js";import{C as y}from"./Col-DIvgp7I2.js";import{B as c}from"./Badge-Cb0QFnV7.js";import{B as d}from"./Button-CGKBl0Dq.js";import{T as M}from"./Tabs-CgjPf3ol.js";import{T as D}from"./Tab-DOFu0ZmO.js";import{T as S}from"./Table-C9xmPB6g.js";import{A as z}from"./Alert-CpJv488r.js";import"./iconify-COVW_57l.js";import"./CardHeaderContext-b-v_Bpfa.js";import"./divWithClassName-CjTg634B.js";import"./Button-CctqLc8n.js";import"./hook-D0SvG8YV.js";import"./extends-CF3RwP-h.js";import"./TabPane-CQiVr46p.js";import"./Nav-BTBuFVjl.js";import"./DataKey-COGXBUcQ.js";import"./NavContext-DIGY4XSH.js";import"./useMergedRefs-WPm0qXrL.js";import"./NavItem-DP8SH5kp.js";import"./useEventCallback-UJTQjI5X.js";import"./NavbarContext-DcEZ1nzM.js";import"./NavLink-iYD8gFE_.js";import"./Anchor-CWIwgsZZ.js";import"./NoopTransition-BubZyDxC.js";import"./ElementChildren-DOv9weAN.js";const ge=()=>{var h,x,j,p,u,f;const{id:n}=k(),o=R(),[t,N]=r.useState(null),[P,w]=r.useState(!0),[T,A]=r.useState("deposits"),[I,m]=r.useState(!1),[L,$]=r.useState(""),[i,C]=r.useState(null);return r.useEffect(()=>{(async()=>{try{const[v,B]=await Promise.all([b.get(`/investments/${n}`),b.get(`/investments/${n}/profit-summary`)]);N(v.data.data),C(B.data.data)}catch{$("Failed to load investment data"),m(!0)}finally{w(!1)}})()},[n]),P?e.jsx("div",{className:"d-flex justify-content-center p-5",children:e.jsx(F,{animation:"border"})}):t?e.jsxs(e.Fragment,{children:[e.jsx(E,{title:`Investment - ${((h=t.user)==null?void 0:h.name)||"N/A"}`,breadcrumbItems:[{label:"Investments",path:"/investments"},{label:((x=t.user)==null?void 0:x.name)||"Investment",active:!0}]}),e.jsx(g,{onClose:()=>m(!1),show:I,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:e.jsx(g.Body,{children:L})}),e.jsx(a,{className:"mb-4",children:e.jsxs(a.Body,{children:[e.jsxs(K,{children:[e.jsxs(y,{md:6,children:[e.jsx("h4",{children:((j=t.user)==null?void 0:j.name)||"N/A"}),e.jsxs("p",{className:"text-muted",children:["Member ID: ",((p=t.user)==null?void 0:p.memberId)||"N/A"]}),e.jsxs("div",{className:"d-flex gap-2 mb-3",children:[e.jsx(c,{bg:t.isActive?"success":"secondary",children:t.isActive?"Active":"Closed"}),e.jsxs(c,{bg:"info",children:["$",t.totalDeposited.toLocaleString()," Deposited"]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{bg:"warning",children:["$",i.totalProfit.toLocaleString()," Profit"]}),e.jsxs(c,{bg:"success",children:["$",i.profitDistributed.toLocaleString()," Paid"]})]})]})]}),e.jsxs(y,{md:6,className:"text-end",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Started:"})," ",new Date(t.startDate).toLocaleDateString()]}),t.endDate&&e.jsxs("p",{children:[e.jsx("strong",{children:"Ended:"})," ",new Date(t.endDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[t.isActive&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"primary",onClick:()=>o(`/investments/${n}/deposits/new`),children:[e.jsx(l,{icon:"mdi:cash-plus",className:"me-1"}),"Add Deposit"]}),e.jsxs(d,{variant:"warning",onClick:()=>o(`/investments/${n}/profits/new`),children:[e.jsx(l,{icon:"mdi:finance",className:"me-1"}),"Add Profit"]}),e.jsxs(d,{variant:"success",onClick:()=>o(`/investments/${n}/profit-payouts/new`),children:[e.jsx(l,{icon:"mdi:cash-multiple",className:"me-1"}),"Distribute Profit"]})]}),e.jsx(d,{variant:"secondary",onClick:()=>o("/investments"),children:"Back to List"})]})]})}),e.jsxs(M,{activeKey:T,onSelect:s=>A(s||"deposits"),className:"mb-3",children:[e.jsx(D,{eventKey:"deposits",title:"Deposits",children:e.jsx(a,{children:e.jsx(a.Body,{children:e.jsxs(S,{striped:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Notes"})]})}),e.jsx("tbody",{children:(u=t.deposits)==null?void 0:u.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(s.depositDate).toLocaleDateString()}),e.jsxs("td",{children:["$",s.amount.toLocaleString()]}),e.jsx("td",{children:s.notes||"-"})]},s.id))})]})})})}),e.jsx(D,{eventKey:"profit-payouts",title:"Profit Payouts",children:e.jsx(a,{children:e.jsxs(a.Body,{children:[i&&e.jsx(z,{variant:"info",className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:["Total Profit:"," ",e.jsxs("strong",{children:["$",i.totalProfit.toLocaleString()]})]}),e.jsxs("span",{children:["Pending:"," ",e.jsxs("strong",{children:["$",i.profitPending.toLocaleString()]})]}),e.jsxs("span",{children:["Distributed:"," ",e.jsxs("strong",{children:["$",i.profitDistributed.toLocaleString()]})]})]})}),e.jsxs(S,{striped:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Notes"})]})}),e.jsx("tbody",{children:(f=t.profitPayouts)==null?void 0:f.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(s.payoutDate).toLocaleDateString()}),e.jsxs("td",{children:["$",s.amount.toLocaleString()]}),e.jsx("td",{children:s.notes||"-"})]},s.id))})]})]})})})]})]}):e.jsx("div",{className:"d-flex justify-content-center p-5",children:"Investment not found"})};export{ge as default};
