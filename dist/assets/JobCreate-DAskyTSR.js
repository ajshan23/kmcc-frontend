import{a as re,r as i,j as e,T as le,g as ce,h as de}from"./index-DTNBVJXJ.js";import{l as pe}from"./cropper-DRbxm2vn.js";import{I as r}from"./IconifyIcon-C822AO2m.js";import{a as me}from"./api-alN533tX.js";import{P as ue}from"./PageTitle-BSd58_4C.js";import{l as he}from"./logo-sm-DeRMNujR.js";import{R as P,C as T}from"./Row-BAydH47-.js";import{C as G}from"./Card-LdjoLELL.js";import{C as E}from"./CardBody-ffggLUo-.js";import{F as a}from"./Form-C-a0Gm7P.js";import{B as n}from"./Button-D3ui8Ipe.js";import"./iconify-DGrS6a3F.js";import"./CardHeaderContext-Cg4WHjpo.js";import"./divWithClassName-Bqr9clmc.js";import"./FormCheck-BrI6a1VK.js";import"./FormContext-BNTEYguM.js";import"./ElementChildren-a0xZHth5.js";import"./FormControl-CXDbjkuY.js";import"./FormLabel-CLyi9vaj.js";import"./Button-LfktIHOk.js";const Pe=()=>{const D=re(),[A,p]=i.useState(!1),[H,h]=i.useState(""),[w,K]=i.useState(null),[g,M]=i.useState(null),[f,O]=i.useState(""),[b,z]=i.useState(""),[C,U]=i.useState(""),[y,_]=i.useState(""),[v,Z]=i.useState(""),[N,$]=i.useState(""),[m,R]=i.useState([""]),[u,S]=i.useState([""]),[c,F]=i.useState([{heading:"",description:""}]),[B,L]=i.useState(!1),j=["Medical","Time Off","Flexible Hours","Remote Work","Bonuses"],[x,k]=i.useState(j),d=i.useRef(null),I=200/200,W=s=>{const t=s.target.files[0];if(t){const o=new FileReader;o.onload=()=>{K(o.result)},o.readAsDataURL(t)}},Q=()=>{var t;const s=(t=d.current)==null?void 0:t.cropper;s&&s.getCroppedCanvas().toBlob(o=>{M(o)})},V=()=>{R([...m,""])},X=s=>{const t=m.filter((o,l)=>l!==s);R(t)},Y=(s,t)=>{const o=[...m];o[s]=t,R(o)},ee=()=>{S([...u,""])},se=s=>{const t=u.filter((o,l)=>l!==s);S(t)},te=(s,t)=>{const o=[...u];o[s]=t,S(o)},ae=()=>{F([...c,{heading:"",description:""}])},oe=s=>{const t=c[s];F(c.filter((o,l)=>l!==s)),j.includes(t.heading)&&k([...x,t.heading])},q=(s,t,o)=>{const l=[...c],J=l[s].heading;l[s]={...l[s],[t]:o},t==="heading"&&(j.includes(J)&&k([...x,J]),j.includes(o)&&k(x.filter(ne=>ne!==o))),F(l)},ie=async()=>{if(!g){h("Please crop the image first."),p(!0);return}if(!f||!b||!C||!y||!v||!N||m.length===0||u.length===0||c.length===0){h("Please fill all required fields."),p(!0);return}L(!0);const s=new FormData;s.append("logo",g,"job-logo.png"),s.append("companyName",f),s.append("position",b),s.append("jobMode",C),s.append("salary",y),s.append("place",v),s.append("jobDescription",N),s.append("keyResponsibilities",JSON.stringify(m.filter(t=>t.trim()!==""))),s.append("requirements",JSON.stringify(u.filter(t=>t.trim()!==""))),s.append("benefits",JSON.stringify(c.filter(t=>t.heading.trim()!==""||t.description.trim()!=="")));try{(await me.post("/jobs/create",s,{headers:{"Content-Type":"multipart/form-data"}})).status===201?(h("Job created successfully!"),p(!0),setTimeout(()=>{D("/job")},2e3)):(h("Failed to create job."),p(!0))}catch(t){console.error("Error creating job:",t),h("Failed to create job. Please try again."),p(!0)}finally{L(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(ue,{title:"New Job"}),e.jsxs(le,{onClose:()=>p(!1),show:A,delay:2e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(ce,{children:[e.jsx("img",{src:he,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(de,{children:H})]}),e.jsx(P,{children:e.jsx(T,{xs:12,children:e.jsx(G,{children:e.jsx(E,{children:e.jsxs(P,{children:[e.jsxs(T,{lg:9,children:[e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Upload Job Logo (200x200)"}),e.jsx(a.Control,{type:"file",accept:"image/*",onChange:W})]}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"img-container",children:e.jsx(pe,{src:w,style:{height:400,width:"100%"},initialAspectRatio:I,aspectRatio:I,guides:!1,crop:Q,ref:d,rotatable:!0,scalable:!0,zoomable:!0})}),e.jsx(G,{children:e.jsx(E,{children:e.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[e.jsxs(n,{onClick:()=>{var s;return(s=d.current)==null?void 0:s.cropper.zoom(.1)},children:[e.jsx(r,{icon:"mdi:magnify-plus-outline"})," ","Zoom In"]}),e.jsxs(n,{onClick:()=>{var s;return(s=d.current)==null?void 0:s.cropper.zoom(-.1)},children:[e.jsx(r,{icon:"mdi:magnify-minus-outline"})," ","Zoom Out"]}),e.jsxs(n,{onClick:()=>{var s;return(s=d.current)==null?void 0:s.cropper.rotate(-45)},children:[e.jsx(r,{icon:"mdi:rotate-left"})," Rotate Left"]}),e.jsxs(n,{onClick:()=>{var s;return(s=d.current)==null?void 0:s.cropper.rotate(45)},children:[e.jsx(r,{icon:"mdi:rotate-right"})," Rotate Right"]}),e.jsxs(n,{onClick:()=>{var s;return(s=d.current)==null?void 0:s.cropper.reset()},children:[e.jsx(r,{icon:"mdi:sync"})," Reset"]}),e.jsxs(n,{onClick:()=>{var s;return(s=d.current)==null?void 0:s.cropper.clear()},children:[e.jsx(r,{icon:"mdi:close"})," Clear"]})]})})})]})]}),e.jsxs(T,{lg:3,children:[e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Company Name"}),e.jsx(a.Control,{type:"text",value:f,onChange:s=>O(s.target.value),placeholder:"Enter company name"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Position"}),e.jsx(a.Control,{type:"text",value:b,onChange:s=>z(s.target.value),placeholder:"Enter position"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Job Mode"}),e.jsxs(a.Control,{as:"select",value:C,onChange:s=>U(s.target.value),children:[e.jsx("option",{value:"",children:"Select job mode"}),e.jsx("option",{value:"Full-Time",children:"Full Time"}),e.jsx("option",{value:"Part-Time",children:"Part Time"}),e.jsx("option",{value:"Freelance",children:"Freelance"}),e.jsx("option",{value:"Internship",children:"Internship"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Salary"}),e.jsx(a.Control,{type:"text",value:y,onChange:s=>_(s.target.value),placeholder:"Enter salary"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Place"}),e.jsx(a.Control,{type:"text",value:v,onChange:s=>Z(s.target.value),placeholder:"Enter place"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Job Description"}),e.jsx(a.Control,{as:"textarea",rows:3,value:N,onChange:s=>$(s.target.value),placeholder:"Enter job description"})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Key Responsibilities"}),m.map((s,t)=>e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(a.Control,{type:"text",value:s,onChange:o=>Y(t,o.target.value),placeholder:`Responsibility ${t+1}`}),e.jsx(n,{variant:"danger",className:"ms-2",onClick:()=>X(t),children:e.jsx(r,{icon:"mdi:delete"})})]},t)),e.jsxs(n,{variant:"secondary",className:"w-100",onClick:V,children:[e.jsx(r,{icon:"mdi:plus"})," Add Responsibility"]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Requirements"}),u.map((s,t)=>e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(a.Control,{type:"text",value:s,onChange:o=>te(t,o.target.value),placeholder:`Requirement ${t+1}`}),e.jsx(n,{variant:"danger",className:"ms-2",onClick:()=>se(t),children:e.jsx(r,{icon:"mdi:delete"})})]},t)),e.jsxs(n,{variant:"secondary",className:"w-100",onClick:ee,children:[e.jsx(r,{icon:"mdi:plus"})," Add Requirement"]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Benefits"}),c.map((s,t)=>e.jsxs("div",{className:"mb-2 p-2 border rounded",children:[e.jsxs(a.Control,{as:"select",value:s.heading,onChange:o=>q(t,"heading",o.target.value),className:"mb-2",children:[e.jsx("option",{value:"",children:"Select a benefit"}),x.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsx(a.Control,{type:"text",value:s.description,onChange:o=>q(t,"description",o.target.value),placeholder:"Benefit Description",className:"mb-2"}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(n,{variant:"danger",onClick:()=>oe(t),disabled:c.length===1,children:e.jsx(r,{icon:"mdi:delete"})})})]},t)),e.jsxs(n,{variant:"secondary",className:"w-100 mt-2",onClick:ae,children:[e.jsx(r,{icon:"mdi:plus"})," Add Benefit"]})]}),e.jsx(n,{variant:"primary",className:"w-100 mt-3",onClick:ie,disabled:!g||B,children:B?"Creating...":"Create Job"})]})]})})})})})]})};export{Pe as default};
