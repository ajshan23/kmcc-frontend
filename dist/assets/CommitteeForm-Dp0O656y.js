import{d as E,u as S,r as a,j as t,T as w,h as N,i as F}from"./index-DKQPNifM.js";import{a as u}from"./api-BAouzzCb.js";import{P as B}from"./PageTitle-CRu15oFp.js";import{l as $}from"./logo-sm-DeRMNujR.js";import{R as C,C as g}from"./Row-Z0t_gNsB.js";import{C as L}from"./Card-D59v7jI9.js";import{C as M}from"./CardBody-DcEFUZwh.js";import{F as o}from"./Form-msQAt-qp.js";import{B as y}from"./Button-CJm9uxN6.js";import"./CardHeaderContext-kdxd1e-2.js";import"./divWithClassName-CmLA-jjW.js";import"./FormCheck-BrYDrZ1e.js";import"./FormContext-wZ54zJwb.js";import"./FormCheckInput-B_azkgLI.js";import"./ElementChildren-CJ8krY86.js";import"./FormControl-BA3XJbTj.js";import"./FormLabel-BnU1TUmx.js";import"./Button-dGMJGo8F.js";const Y=()=>{const{id:n}=E(),e=!!n,p=S(),[b,r]=a.useState(!1),[T,m]=a.useState(""),[c,h]=a.useState(""),[l,x]=a.useState(""),[f,d]=a.useState(!1);a.useEffect(()=>{e&&(async()=>{try{const s=await u.get(`/constitution-committees/${n}`);if(s.status===200){const j=s.data.data;h(j.title),x(j.description||"")}}catch(s){console.error("Error fetching committee:",s),m("Failed to load committee data"),r(!0)}})()},[n,e]);const v=async i=>{if(i.preventDefault(),d(!0),!c){m("Committee title is required"),r(!0),d(!1);return}try{let s;e?s=await u.put(`/constitution-committees/${n}`,{title:c,description:l}):s=await u.post("/constitution-committees",{title:c,description:l}),s.status===(e?200:201)&&(m(`Committee ${e?"updated":"created"} successfully!`),r(!0),setTimeout(()=>{p("/constitution-committees")},1500))}catch(s){console.error(`Error ${e?"updating":"creating"} committee:`,s),m(`Failed to ${e?"update":"create"} committee. Please try again.`),r(!0)}finally{d(!1)}};return t.jsxs(t.Fragment,{children:[t.jsx(B,{title:e?"Edit Committee":"Create Committee"}),t.jsxs(w,{onClose:()=>r(!1),show:b,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[t.jsxs(N,{children:[t.jsx("img",{src:$,alt:"brand-logo",height:"16",className:"me-1"}),t.jsx("strong",{className:"me-auto",children:"KMCC"})]}),t.jsx(F,{children:T})]}),t.jsx(C,{children:t.jsx(g,{xs:12,children:t.jsx(L,{children:t.jsx(M,{children:t.jsxs(o,{onSubmit:v,children:[t.jsx(C,{children:t.jsxs(g,{md:12,children:[t.jsxs(o.Group,{className:"mb-3",children:[t.jsx(o.Label,{children:"Title *"}),t.jsx(o.Control,{type:"text",value:c,onChange:i=>h(i.target.value),placeholder:"Enter committee title",required:!0})]}),t.jsxs(o.Group,{className:"mb-3",children:[t.jsx(o.Label,{children:"Description"}),t.jsx(o.Control,{as:"textarea",rows:3,value:l,onChange:i=>x(i.target.value),placeholder:"Enter committee description"})]})]})}),t.jsxs("div",{className:"d-flex justify-content-end mt-4",children:[t.jsx(y,{variant:"secondary",className:"me-2",onClick:()=>p("/constitution-committees"),children:"Cancel"}),t.jsx(y,{variant:"primary",type:"submit",disabled:f,children:f?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),e?"Updating...":"Creating..."]}):e?"Update Committee":"Create Committee"})]})]})})})})})]})};export{Y as default};
