import{r as t,j as e,T as B,h as D,i as I,L as u}from"./index-Bk3vKcFm.js";import{P as M}from"./PageTitle-DFrWf-CA.js";import{a as f}from"./api-CQpZrRPq.js";import{I as m}from"./IconifyIcon-BmM1FoR_.js";import{l as E}from"./logo-sm-Bq_R7RX3.js";import{C as k,a as L}from"./Card-CJZGyBPV.js";import{R}from"./Row-DsFnQgll.js";import{C as g}from"./Col-B9Ck3_nO.js";import{B as i}from"./Button-B73yjmLp.js";import{T as F}from"./Table-B9g73rhs.js";import{B as H}from"./Badge-Co2FxZgF.js";import{B as z}from"./ButtonGroup-CiASgOaG.js";import{M as a}from"./Modal-BcxB1f_U.js";import"./iconify-D1qMnGbo.js";import"./CardHeaderContext-B-uaTyk9.js";import"./divWithClassName-BPCtmpC6.js";import"./Button-KCNyPJY1.js";import"./AbstractModalHeader-CT9CNFH9.js";import"./useWindow-FVeRFVSH.js";import"./usePrevious-COQVwKSh.js";import"./useEventCallback-bUiB-FRr.js";import"./hasClass-CV2QOZqU.js";import"./useMergedRefs-C9mrTmSQ.js";import"./NoopTransition-Cr60fMZ6.js";import"./DataKey-COGXBUcQ.js";const ne=()=>{const[v,h]=t.useState([]),[y,x]=t.useState(!1),[l,p]=t.useState(null),[S,c]=t.useState(""),[N,o]=t.useState(!1),[n,T]=t.useState("");t.useEffect(()=>{(async()=>{try{const r=await f.get("/services");r.status===200&&h(r.data.data.services)}catch(r){console.error("Error fetching services:",r),c("Failed to load services"),o(!0)}})()},[]);const w=s=>{p(s),x(!0)},d=()=>{x(!1),p(null)},C=async()=>{if(l)try{(await f.delete(`/services/${l}`)).status===200&&(h(r=>r.filter(b=>b.id!==l)),c("Service deleted successfully!"),o(!0))}catch(s){console.error("Error deleting service:",s),c("Failed to delete service."),o(!0)}finally{d()}},j=v.filter(s=>s.title.toLowerCase().includes(n.toLowerCase()));return e.jsxs("div",{className:"p-4",children:[e.jsx(M,{title:"Service Management"}),e.jsxs(B,{onClose:()=>o(!1),show:N,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(D,{children:[e.jsx("img",{src:E,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(I,{children:S})]}),e.jsx(k,{className:"shadow-sm",children:e.jsxs(L,{children:[e.jsxs(R,{className:"mb-4",children:[e.jsx(g,{md:6,className:"mb-3 mb-md-0",children:e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search services...",value:n,onChange:s=>T(s.target.value),style:{width:"300px",borderRadius:"8px"}})})}),e.jsx(g,{md:6,className:"text-md-end",children:e.jsxs(i,{variant:"primary",as:u,to:"/service/new",className:"px-4",children:[e.jsx(m,{icon:"mdi:plus",className:"me-2"}),"New Service"]})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs(F,{striped:!0,bordered:!0,hover:!0,children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Time"}),e.jsx("th",{children:"Days"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:j.length>0?j.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.title}),e.jsx("td",{children:s.location}),e.jsxs("td",{children:[s.startingTime," - ",s.stoppingTime]}),e.jsx("td",{children:e.jsx(H,{bg:"info",children:s.availableDays})}),e.jsx("td",{children:s.phoneNumber}),e.jsx("td",{children:s.image?e.jsx("img",{src:s.image,alt:"Service",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"4px"}}):e.jsx("span",{className:"text-muted",children:"No image"})}),e.jsx("td",{children:e.jsxs(z,{children:[e.jsxs(i,{variant:"primary",size:"sm",as:u,to:`/service/edit/${s.id}`,className:"me-2",children:[e.jsx(m,{icon:"mdi:pencil",className:"me-1"}),"Edit"]}),e.jsxs(i,{variant:"danger",size:"sm",onClick:()=>w(s.id),children:[e.jsx(m,{icon:"mdi:trash",className:"me-1"}),"Delete"]})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-4",children:n?"No services match your search":"No services found"})})})]})})]})}),e.jsxs(a,{show:y,onHide:d,centered:!0,children:[e.jsx(a.Header,{closeButton:!0,children:e.jsx(a.Title,{children:"Confirm Deletion"})}),e.jsx(a.Body,{children:"Are you sure you want to delete this service? This action cannot be undone."}),e.jsxs(a.Footer,{children:[e.jsx(i,{variant:"secondary",onClick:d,children:"Cancel"}),e.jsx(i,{variant:"danger",onClick:C,children:"Delete"})]})]})]})};export{ne as default};
