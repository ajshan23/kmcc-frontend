import{d as S,u as v,r as o,j as e,T as w,h as F,i as I}from"./index-DZiXj8TR.js";import{a as g}from"./api-CQpZrRPq.js";import{P as B}from"./PageTitle-DsU_ZpA0.js";import{l as $}from"./logo-sm-Bq_R7RX3.js";import{I as L}from"./IconifyIcon-BSqbF420.js";import{R as b,C as M}from"./Row-DDbPR_EX.js";import{C as G,a as P}from"./Card-CSmnExEW.js";import{F as a}from"./Form-BpKd490-.js";import{B as R}from"./Button-BxiFzc-j.js";import"./iconify-DkiI8ZpJ.js";import"./CardHeaderContext-DtkFU5Q_.js";import"./divWithClassName-BB-OH6fM.js";import"./FormCheck-uCRPbm19.js";import"./FormContext-52DUx_Tc.js";import"./ElementChildren-UnnKUi4O.js";import"./FormControl-CYWbfcub.js";import"./FormLabel-DPx4Bcny.js";import"./Button-DamFSoRp.js";const ae=()=>{const{id:d}=S(),t=!!d,N=v(),[T,l]=o.useState(!1),[A,p]=o.useState(""),[H,m]=o.useState("success"),[c,f]=o.useState(!1),[u,j]=o.useState(""),[h,y]=o.useState(""),[x,C]=o.useState("");o.useEffect(()=>{t&&(async()=>{try{const s=await g.get(`/airport/${d}`);if(s.status===200){const i=s.data.data||s.data;j(i.name),y(i.iataCode),C(i.country)}}catch(s){console.error("Error fetching airport:",s),p("Failed to load airport data."),m("danger"),l(!0)}})()},[d,t]);const E=async()=>{var s,i;if(!u||!h||!x){p("All fields (name, code, country) are required"),m("danger"),l(!0);return}f(!0);const r={name:u,code:h,country:x};try{let n;t?n=await g.put(`/airport/${d}`,r):n=await g.post("/airport",r),n.status===(t?200:201)&&(p(`Airport ${t?"updated":"created"} successfully!`),m("success"),l(!0),setTimeout(()=>N("/airport"),2e3))}catch(n){console.error(`Error ${t?"updating":"creating"} airport:`,n),p(((i=(s=n.response)==null?void 0:s.data)==null?void 0:i.message)||`Failed to ${t?"update":"create"} airport.`),m("danger"),l(!0)}finally{f(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:t?"Edit Airport":"New Airport"}),e.jsxs(w,{onClose:()=>l(!1),show:T,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(F,{children:[e.jsx("img",{src:$,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"TECHMIN"})]}),e.jsx(I,{children:A})]}),e.jsx(b,{children:e.jsx(M,{xs:12,children:e.jsx(G,{children:e.jsx(P,{children:e.jsxs(b,{className:"p-10",children:[e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Name"}),e.jsx(a.Control,{type:"text",value:u,onChange:r=>j(r.target.value),placeholder:"Enter airport name",disabled:c})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Code"}),e.jsx(a.Control,{type:"text",value:h,onChange:r=>y(r.target.value),placeholder:"Enter airport code (IATA)",disabled:c})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Country"}),e.jsx(a.Control,{type:"text",value:x,onChange:r=>C(r.target.value),placeholder:"Enter country",disabled:c})]}),e.jsx(R,{variant:"primary",className:"w-100 mt-3",onClick:E,disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{icon:t?"mdi:pencil":"mdi:plus"})," ",t?"Update Airport":"Create Airport"]})})]})})})})})]})};export{ae as default};
