import{u as T,d as v,r as o,j as a,T as S,h as w,i as E}from"./index-KHl5Zwey.js";import{a as x}from"./api-CQpZrRPq.js";import{P as G}from"./PageTitle-ltcpd1T0.js";import{l as N}from"./logo-sm-Bq_R7RX3.js";import{I as F}from"./IconifyIcon-DTxnPJmw.js";import{R as I}from"./Row-DTReupHh.js";import{C as R}from"./Col-DQW9fkJI.js";import{C as B,a as D}from"./Card-BPUBYUYl.js";import{F as r}from"./Form-DV8yfCFc.js";import{B as j}from"./Button-Dtqr-UsE.js";import"./iconify-RmtcZ_gc.js";import"./CardHeaderContext-CHseNdA8.js";import"./divWithClassName-UUPJNpO1.js";import"./FormCheck-D1EV8qhw.js";import"./FormContext-DpqmDVdf.js";import"./FormCheckInput-BBmIHxcd.js";import"./ElementChildren-D9By0SA4.js";import"./FormControl-C6itCDlW.js";import"./FormLabel-BVDa38dv.js";import"./Button-C66-hUbx.js";const ea=()=>{const l=T(),{id:m}=v(),[y,i]=o.useState(!1),[P,c]=o.useState(""),[n,p]=o.useState(!1),[e,C]=o.useState(!1),[g,u]=o.useState({name:"",description:""});o.useEffect(()=>{m&&(async()=>{p(!0);try{const s=await x.get(`/gold/${m}`);s.status===200&&(u({name:s.data.data.name,description:s.data.data.description||""}),C(!0))}catch(s){console.error("Error fetching program:",s),c("Failed to load program data."),i(!0),l("/gold-programs")}finally{p(!1)}})()},[m,l]);const h=d=>{const{name:s,value:t}=d.target;u(f=>({...f,[s]:t}))},b=async()=>{var d,s;if(!g.name){c("Program name is required"),setToastVariant("danger"),i(!0);return}p(!0);try{const t=e?`/gold/${m}`:"/gold/start",L=await x[e?"put":"post"](t,g);c(e?"Program updated successfully":"Program started successfully"),i(!0),setTimeout(()=>l("/gold-programs"),1500)}catch(t){console.error("Error:",t),c(((s=(d=t.response)==null?void 0:d.data)==null?void 0:s.message)||`Failed to ${e?"update":"start"} program`),i(!0)}finally{p(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx(G,{title:e?"Edit Gold Program":"New Gold Program"}),a.jsxs(S,{onClose:()=>i(!1),show:y,delay:3e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[a.jsxs(w,{children:[a.jsx("img",{src:N,alt:"brand-logo",height:"16",className:"me-1"}),a.jsx("strong",{className:"me-auto",children:"GOLD PROGRAM"})]}),a.jsx(E,{children:P})]}),a.jsx(I,{children:a.jsx(R,{xs:12,children:a.jsx(B,{children:a.jsx(D,{children:a.jsxs(r,{children:[a.jsxs(r.Group,{className:"mb-3",children:[a.jsx(r.Label,{children:"Program Name*"}),a.jsx(r.Control,{type:"text",name:"name",value:g.name,onChange:h,placeholder:"Gold Investment 2024",disabled:n})]}),a.jsxs(r.Group,{className:"mb-3",children:[a.jsx(r.Label,{children:"Description"}),a.jsx(r.Control,{as:"textarea",rows:3,name:"description",value:g.description,onChange:h,placeholder:"Program details...",disabled:n})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx(j,{variant:"secondary",onClick:()=>l("/gold-programs"),disabled:n,children:"Cancel"}),a.jsxs(j,{variant:"primary",onClick:b,disabled:n,children:[a.jsx(F,{icon:e?"mdi:pencil":"mdi:plus"})," ",n?"Processing...":e?"Update":"Start Program"]})]})]})})})})})]})};export{ea as default};
