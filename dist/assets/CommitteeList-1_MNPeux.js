import{r as i,j as e,T as N,h as S,i as B,L as m}from"./index-CfNT85tM.js";import{P as M}from"./PageTitle-D_HZ265t.js";import{a as p}from"./api-BAouzzCb.js";import{I as c}from"./IconifyIcon-0D5ZULyN.js";import{l as D}from"./logo-sm-DeRMNujR.js";import{R as L,C as k}from"./Row-pUvplkm2.js";import{C as f}from"./Card-BxC9ygCX.js";import{B as r}from"./Button-DmtmunvM.js";import{T as E}from"./Table-DAjJSobz.js";import{B as I}from"./Badge-Dxw4lbGc.js";import{M as n}from"./Modal-xL1nFGJh.js";import"./iconify-Dnpwx_79.js";import"./CardBody-TiP-bp9B.js";import"./CardHeaderContext-DMh6jMut.js";import"./divWithClassName-MTQsKDs0.js";import"./Button-AVmPP0NH.js";import"./AbstractModalHeader-o6WA7pR6.js";import"./useWindow-BmY1pYqs.js";import"./usePrevious-TUyZfySc.js";import"./useEventCallback-B2meNR0i.js";import"./hasClass-BQeUoxnv.js";import"./useMergedRefs-eYDo2WSS.js";import"./NoopTransition-BANWBBX8.js";import"./DataKey-COGXBUcQ.js";const oe=()=>{const[C,h]=i.useState([]),[g,a]=i.useState(!1),[o,x]=i.useState(null),[y,l]=i.useState(!1),[w,d]=i.useState(""),[T,j]=i.useState(!0);i.useEffect(()=>{(async()=>{try{j(!0);const s=await p.get("/constitution-committees");s.status===200&&h(s.data.data)}catch(s){console.error("Error fetching committees:",s),d("Failed to load committees"),l(!0)}finally{j(!1)}})()},[]);const b=t=>{x(t),a(!0)},v=async()=>{if(o)try{await p.delete(`/constitution-committees/${o.id}`),h(t=>t.filter(s=>s.id!==o.id)),d("Committee deleted successfully!"),l(!0)}catch(t){console.error("Error deleting committee:",t),d("Failed to delete committee"),l(!0)}finally{a(!1),x(null)}};return T?e.jsx("div",{className:"d-flex justify-content-center p-5",children:"Loading..."}):e.jsxs("div",{className:"d-flex p-4",children:[e.jsx(M,{title:"Constitution Committees"}),e.jsxs(N,{onClose:()=>l(!1),show:y,delay:5e3,autohide:!0,style:{position:"fixed",top:20,right:20,zIndex:9999},children:[e.jsxs(S,{children:[e.jsx("img",{src:D,alt:"brand-logo",height:"16",className:"me-1"}),e.jsx("strong",{className:"me-auto",children:"KMCC"})]}),e.jsx(B,{children:w})]}),e.jsx(L,{className:"w-100",children:e.jsx(k,{xs:12,children:e.jsx(f,{children:e.jsxs(f.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h4",{children:"Constitution Committees"}),e.jsxs(r,{variant:"primary",as:m,to:"/constitution-committees/new",children:[e.jsx(c,{icon:"mdi:plus",className:"me-1"}),"Create New"]})]}),e.jsxs(E,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Members"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:C.map((t,s)=>{var u;return e.jsxs("tr",{children:[e.jsx("td",{children:s+1}),e.jsx("td",{children:t.title}),e.jsx("td",{children:t.description?`${t.description.substring(0,50)}...`:"No description"}),e.jsx("td",{children:e.jsx(I,{bg:"info",children:((u=t._count)==null?void 0:u.members)||0})}),e.jsx("td",{children:new Date(t.createdAt).toLocaleDateString()}),e.jsxs("td",{children:[e.jsx(r,{variant:"info",size:"sm",className:"me-2",as:m,to:`/constitution-committees/${t.id}`,children:e.jsx(c,{icon:"mdi:eye",color:"white"})}),e.jsx(r,{variant:"primary",size:"sm",className:"me-2",as:m,to:`/constitution-committees/edit/${t.id}`,children:e.jsx(c,{icon:"mdi:pencil",color:"white"})}),e.jsx(r,{variant:"danger",size:"sm",onClick:()=>b(t),children:e.jsx(c,{icon:"mdi:delete",color:"white"})})]})]},t.id)})})]})]})})})}),e.jsxs(n,{show:g,onHide:()=>a(!1),centered:!0,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Delete Committee"})}),e.jsxs(n.Body,{children:['Are you sure you want to delete "',o==null?void 0:o.title,'"? This action cannot be undone.']}),e.jsxs(n.Footer,{children:[e.jsx(r,{variant:"secondary",onClick:()=>a(!1),children:"Cancel"}),e.jsx(r,{variant:"danger",onClick:v,children:"Delete"})]})]})]})};export{oe as default};
